
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.3.9">
    
    
      
        <title>API reference - Pyspatialml</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.1d29e8d0.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#reference" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Pyspatialml" class="md-header__button md-logo" aria-label="Pyspatialml" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Pyspatialml
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              API reference
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/stevenpawley/Pyspatialml" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href=".." class="md-tabs__link">
      About
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../design/" class="md-tabs__link">
      Usage overview
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../quickstart/" class="md-tabs__link">
      Quickstart
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../geoprocessing/" class="md-tabs__link">
      Raster geoprocessing
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../plotting/" class="md-tabs__link">
      Plotting
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../sampling/" class="md-tabs__link">
      Sampling
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../transformers/" class="md-tabs__link">
      Spatial transformers
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../mlworkflow/" class="md-tabs__link">
      Example workflow
    </a>
  </li>

      
        
  
  
    
  


  <li class="md-tabs__item">
    <a href="./" class="md-tabs__link md-tabs__link--active">
      API reference
    </a>
  </li>

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Pyspatialml" class="md-nav__button md-logo" aria-label="Pyspatialml" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Pyspatialml
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/stevenpawley/Pyspatialml" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        About
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../design/" class="md-nav__link">
        Usage overview
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../quickstart/" class="md-nav__link">
        Quickstart
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../geoprocessing/" class="md-nav__link">
        Raster geoprocessing
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../plotting/" class="md-nav__link">
        Plotting
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../sampling/" class="md-nav__link">
        Sampling
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../transformers/" class="md-nav__link">
        Spatial transformers
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../mlworkflow/" class="md-nav__link">
        Example workflow
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          API reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        API reference
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#raster" class="md-nav__link">
    Raster
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyspatialml.raster" class="md-nav__link">
    pyspatialml.raster
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster" class="md-nav__link">
    Raster
  </a>
  
    <nav class="md-nav" aria-label="Raster">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster--attributes" class="md-nav__link">
    Attributes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.__init__" class="md-nav__link">
    __init__()
  </a>
  
    <nav class="md-nav" aria-label="__init__()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.__init__--parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.__init__--returns" class="md-nav__link">
    Returns
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.aggregate" class="md-nav__link">
    aggregate()
  </a>
  
    <nav class="md-nav" aria-label="aggregate()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.aggregate--parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.aggregate--returns" class="md-nav__link">
    Returns
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.alter" class="md-nav__link">
    alter()
  </a>
  
    <nav class="md-nav" aria-label="alter()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.alter--parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.alter--returns" class="md-nav__link">
    Returns
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.append" class="md-nav__link">
    append()
  </a>
  
    <nav class="md-nav" aria-label="append()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.append--parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.append--returns" class="md-nav__link">
    Returns
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.apply" class="md-nav__link">
    apply()
  </a>
  
    <nav class="md-nav" aria-label="apply()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.apply--parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.apply--returns" class="md-nav__link">
    Returns
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.block_shape" class="md-nav__link">
    block_shape()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.block_shapes" class="md-nav__link">
    block_shapes()
  </a>
  
    <nav class="md-nav" aria-label="block_shapes()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.block_shapes--parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.bounds" class="md-nav__link">
    bounds()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.close" class="md-nav__link">
    close()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.copy" class="md-nav__link">
    copy()
  </a>
  
    <nav class="md-nav" aria-label="copy()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.copy--parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.copy--returns" class="md-nav__link">
    Returns
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.count" class="md-nav__link">
    count()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.crop" class="md-nav__link">
    crop()
  </a>
  
    <nav class="md-nav" aria-label="crop()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.crop--parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.crop--returns" class="md-nav__link">
    Returns
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.crs" class="md-nav__link">
    crs()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.drop" class="md-nav__link">
    drop()
  </a>
  
    <nav class="md-nav" aria-label="drop()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.drop--parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.drop--returns" class="md-nav__link">
    Returns
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.dtypes" class="md-nav__link">
    dtypes()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.extract_raster" class="md-nav__link">
    extract_raster()
  </a>
  
    <nav class="md-nav" aria-label="extract_raster()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.extract_raster--parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.extract_raster--returns" class="md-nav__link">
    Returns
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.extract_vector" class="md-nav__link">
    extract_vector()
  </a>
  
    <nav class="md-nav" aria-label="extract_vector()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.extract_vector--parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.extract_vector--returns" class="md-nav__link">
    Returns
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.extract_xy" class="md-nav__link">
    extract_xy()
  </a>
  
    <nav class="md-nav" aria-label="extract_xy()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.extract_xy--parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.extract_xy--returns" class="md-nav__link">
    Returns
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.head" class="md-nav__link">
    head()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.height" class="md-nav__link">
    height()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.intersect" class="md-nav__link">
    intersect()
  </a>
  
    <nav class="md-nav" aria-label="intersect()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.intersect--parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.intersect--returns" class="md-nav__link">
    Returns
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.mask" class="md-nav__link">
    mask()
  </a>
  
    <nav class="md-nav" aria-label="mask()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.mask--parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.mask--returns" class="md-nav__link">
    Returns
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.nodatavals" class="md-nav__link">
    nodatavals()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.predict" class="md-nav__link">
    predict()
  </a>
  
    <nav class="md-nav" aria-label="predict()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.predict--parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.predict--returns" class="md-nav__link">
    Returns
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.predict_proba" class="md-nav__link">
    predict_proba()
  </a>
  
    <nav class="md-nav" aria-label="predict_proba()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.predict_proba--parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.predict_proba--returns" class="md-nav__link">
    Returns
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.read" class="md-nav__link">
    read()
  </a>
  
    <nav class="md-nav" aria-label="read()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.read--parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.read--returns" class="md-nav__link">
    Returns
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.rename" class="md-nav__link">
    rename()
  </a>
  
    <nav class="md-nav" aria-label="rename()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.rename--parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.rename--returns" class="md-nav__link">
    Returns
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.res" class="md-nav__link">
    res()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.sample" class="md-nav__link">
    sample()
  </a>
  
    <nav class="md-nav" aria-label="sample()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.sample--parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.sample--returns" class="md-nav__link">
    Returns
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.scale" class="md-nav__link">
    scale()
  </a>
  
    <nav class="md-nav" aria-label="scale()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.scale--parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.scale--returns" class="md-nav__link">
    Returns
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.set_block_shape" class="md-nav__link">
    set_block_shape()
  </a>
  
    <nav class="md-nav" aria-label="set_block_shape()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.set_block_shape--parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.shape" class="md-nav__link">
    shape()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.tail" class="md-nav__link">
    tail()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.to_crs" class="md-nav__link">
    to_crs()
  </a>
  
    <nav class="md-nav" aria-label="to_crs()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.to_crs--parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.to_crs--returns" class="md-nav__link">
    Returns
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.to_pandas" class="md-nav__link">
    to_pandas()
  </a>
  
    <nav class="md-nav" aria-label="to_pandas()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.to_pandas--parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.to_pandas--returns" class="md-nav__link">
    Returns
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.transform" class="md-nav__link">
    transform()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.width" class="md-nav__link">
    width()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.write" class="md-nav__link">
    write()
  </a>
  
    <nav class="md-nav" aria-label="write()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.write--parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.raster.Raster.write--returns" class="md-nav__link">
    Returns
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyspatialml.rasterlayer" class="md-nav__link">
    pyspatialml.rasterlayer
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyspatialml.rasterlayer.RasterLayer" class="md-nav__link">
    RasterLayer
  </a>
  
    <nav class="md-nav" aria-label="RasterLayer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyspatialml.rasterlayer.RasterLayer--attributes" class="md-nav__link">
    Attributes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.rasterlayer.RasterLayer.__abs__" class="md-nav__link">
    __abs__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.rasterlayer.RasterLayer.__add__" class="md-nav__link">
    __add__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.rasterlayer.RasterLayer.__and__" class="md-nav__link">
    __and__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.rasterlayer.RasterLayer.__ceil__" class="md-nav__link">
    __ceil__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.rasterlayer.RasterLayer.__floor__" class="md-nav__link">
    __floor__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.rasterlayer.RasterLayer.__init__" class="md-nav__link">
    __init__()
  </a>
  
    <nav class="md-nav" aria-label="__init__()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyspatialml.rasterlayer.RasterLayer.__init__--parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.rasterlayer.RasterLayer.__mul__" class="md-nav__link">
    __mul__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.rasterlayer.RasterLayer.__neg__" class="md-nav__link">
    __neg__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.rasterlayer.RasterLayer.__or__" class="md-nav__link">
    __or__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.rasterlayer.RasterLayer.__pos__" class="md-nav__link">
    __pos__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.rasterlayer.RasterLayer.__round__" class="md-nav__link">
    __round__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.rasterlayer.RasterLayer.__sub__" class="md-nav__link">
    __sub__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.rasterlayer.RasterLayer.__truediv__" class="md-nav__link">
    __truediv__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.rasterlayer.RasterLayer.__trunc__" class="md-nav__link">
    __trunc__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.rasterlayer.RasterLayer.__xor__" class="md-nav__link">
    __xor__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.rasterlayer.RasterLayer.max" class="md-nav__link">
    max()
  </a>
  
    <nav class="md-nav" aria-label="max()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyspatialml.rasterlayer.RasterLayer.max--parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.rasterlayer.RasterLayer.max--returns" class="md-nav__link">
    Returns
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.rasterlayer.RasterLayer.mean" class="md-nav__link">
    mean()
  </a>
  
    <nav class="md-nav" aria-label="mean()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyspatialml.rasterlayer.RasterLayer.mean--parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.rasterlayer.RasterLayer.mean--returns" class="md-nav__link">
    Returns
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.rasterlayer.RasterLayer.median" class="md-nav__link">
    median()
  </a>
  
    <nav class="md-nav" aria-label="median()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyspatialml.rasterlayer.RasterLayer.median--parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.rasterlayer.RasterLayer.median--returns" class="md-nav__link">
    Returns
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.rasterlayer.RasterLayer.min" class="md-nav__link">
    min()
  </a>
  
    <nav class="md-nav" aria-label="min()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyspatialml.rasterlayer.RasterLayer.min--parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.rasterlayer.RasterLayer.min--returns" class="md-nav__link">
    Returns
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.rasterlayer.RasterLayer.plot" class="md-nav__link">
    plot()
  </a>
  
    <nav class="md-nav" aria-label="plot()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyspatialml.rasterlayer.RasterLayer.plot--returns" class="md-nav__link">
    Returns
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.rasterlayer.RasterLayer.read" class="md-nav__link">
    read()
  </a>
  
    <nav class="md-nav" aria-label="read()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyspatialml.rasterlayer.RasterLayer.read--parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.rasterlayer.RasterLayer.stddev" class="md-nav__link">
    stddev()
  </a>
  
    <nav class="md-nav" aria-label="stddev()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyspatialml.rasterlayer.RasterLayer.stddev--parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.rasterlayer.RasterLayer.stddev--returns" class="md-nav__link">
    Returns
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.rasterlayer.RasterLayer.write" class="md-nav__link">
    write()
  </a>
  
    <nav class="md-nav" aria-label="write()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyspatialml.rasterlayer.RasterLayer.write--parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.rasterlayer.RasterLayer.write--returns" class="md-nav__link">
    Returns
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyspatialml.transformers" class="md-nav__link">
    pyspatialml.transformers
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyspatialml.transformers.GeoDistTransformer" class="md-nav__link">
    GeoDistTransformer
  </a>
  
    <nav class="md-nav" aria-label="GeoDistTransformer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyspatialml.transformers.GeoDistTransformer--parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.transformers.GeoDistTransformer--returns" class="md-nav__link">
    Returns
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyspatialml.transformers.KNNTransformer" class="md-nav__link">
    KNNTransformer
  </a>
  
    <nav class="md-nav" aria-label="KNNTransformer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyspatialml.transformers.KNNTransformer--parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.transformers.KNNTransformer.fit" class="md-nav__link">
    fit()
  </a>
  
    <nav class="md-nav" aria-label="fit()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyspatialml.transformers.KNNTransformer.fit--parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.transformers.KNNTransformer.transform" class="md-nav__link">
    transform()
  </a>
  
    <nav class="md-nav" aria-label="transform()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyspatialml.transformers.KNNTransformer.transform--parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyspatialml.vector" class="md-nav__link">
    pyspatialml.vector
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyspatialml.vector.filter_points" class="md-nav__link">
    filter_points()
  </a>
  
    <nav class="md-nav" aria-label="filter_points()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyspatialml.vector.filter_points--args" class="md-nav__link">
    Args
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.vector.filter_points--returns" class="md-nav__link">
    Returns
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pyspatialml.vector.get_random_point_in_polygon" class="md-nav__link">
    get_random_point_in_polygon()
  </a>
  
    <nav class="md-nav" aria-label="get_random_point_in_polygon()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyspatialml.vector.get_random_point_in_polygon--args" class="md-nav__link">
    Args
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyspatialml.vector.get_random_point_in_polygon--returns" class="md-nav__link">
    Returns
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
  <a href="https://github.com/stevenpawley/Pyspatialml/edit/master/docs/api.md" title="Edit this page" class="md-content__button md-icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>



<h1 id="reference">Reference</h1>
<h2 id="raster">Raster</h2>


<div class="doc doc-object doc-module">


<a id="pyspatialml.raster"></a>
  <div class="doc doc-contents first">

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="pyspatialml.raster.Raster" class="doc doc-heading">
        <code>Raster</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><span title="pyspatialml.raster._LocIndexer">_LocIndexer</span></code>, <code><span title="pyspatialml.rasterstats.RasterStats">RasterStats</span></code>, <code><span title="pyspatialml._plotting.RasterPlot">RasterPlot</span></code></p>

  
      <p>Creates a collection of file-based GDAL-supported raster
datasets that share a common coordinate reference system and
geometry.</p>
<p>Raster objects encapsulate RasterLayer objects, which represent
single band raster datasets that can physically be represented by
either separate single-band raster files, multi-band raster files,
or any combination of individual bands from multi-band raster and
single-band raster datasets.</p>
<h4 id="pyspatialml.raster.Raster--attributes">Attributes</h4>

<details class="files-">
  <summary>list</summary>
  <p>A list of the raster dataset files that are used in the Raster.
This does not have to be the same length as the number of
RasterLayers because some files may have multiple bands.</p>
</details>
<details class="meta-">
  <summary>dict</summary>
  <p>A dict containing the raster metadata. The dict contains the
following keys/values:</p>
<p>crs : the crs object
transform : the Affine.affine transform object
width : width of the Raster in pixels
height : height of the Raster in pixels
count : number of RasterLayers within the Raster
dtype : the numpy datatype that represents lowest common
        denominator of the different dtypes for all of the layers
        in the Raster.</p>
</details>
<details class="names-">
  <summary>list</summary>
  <p>A list of the RasterLayer names.</p>
</details>
<details class="block_shape-">
  <summary>tuple</summary>
  <p>The default block_shape in (rows, cols) for reading windows of data
in the Raster for out-of-memory processing.</p>
</details>


  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="pyspatialml.raster.Raster.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">nodata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">file_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">driver</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">tempdir</span><span class="o">=</span><span class="n">tempfile</span><span class="o">.</span><span class="n">tempdir</span><span class="p">,</span> <span class="n">in_memory</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Initiate a new Raster object</p>
<h5 id="pyspatialml.raster.Raster.__init__--parameters">Parameters</h5>

<details class="src-">
  <summary>file path, RasterLayer, rasterio dataset, or a ndarray</summary>
  <p>Initiate a Raster object from any combination of a file
path or list of file paths to GDAL-supported raster
datasets, RasterLayer objects, or directly from a rasterio
dataset or band object that is opened in 'r' or 'rw' mode.</p>
<p>A Raster object can also be created directly from a numpy
array in [band, rows, cols] order. The additional arguments
<code>crs</code> and <code>transform</code> should also be provided to supply
spatial coordinate information.</p>
</details>
<details class="crs-">
  <summary>rasterio.crs.CRS object (optional, default is None)</summary>
  <p>CRS object containing projection information for data if
provided as an array.</p>
</details>
<details class="transform-">
  <summary>affine.Affine object (optional, default is None)</summary>
  <p>Affine object containing transform information for data if
provided as an array.</p>
</details>
<details class="nodata-">
  <summary>any number (optional, default is None)</summary>
  <p>Assign a nodata value to the Raster dataset when <code>src</code> is
a ndarray. If a nodata value is not specified then it is
determined based on the minimum permissible value for the
array's data type.</p>
</details>
<details class="file_path-">
  <summary>str (optional, default None)</summary>
  <p>Path to save new Raster object if created from an array.</p>
</details>
<details class="driver-">
  <summary>str (optional, default=None)</summary>
  <p>A GDAL compatible driver to use when initiating a raster
from a numpy array.</p>
</details>
<details class="tempdir-">
  <summary>str, default is tempfile.tempdir</summary>
  <p>Path to a directory to store temporary files that are
produced during geoprocessing operations.</p>
</details>
<details class="in_memory-">
  <summary>bool, default is False</summary>
  <p>Whether to initiate the Raster from an array and store the
data in-memory using Rasterio's in-memory files.</p>
</details>      <h5 id="pyspatialml.raster.Raster.__init__--returns">Returns</h5>
<p>pyspatialml.Raster
    Raster object containing the src layers stacked into a
    single object.</p>

  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.raster.Raster.aggregate" class="doc doc-heading">
<code class="highlight language-python"><span class="n">aggregate</span><span class="p">(</span><span class="n">out_shape</span><span class="p">,</span> <span class="n">resampling</span><span class="o">=</span><span class="s1">&#39;nearest&#39;</span><span class="p">,</span> <span class="n">file_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">in_memory</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">driver</span><span class="o">=</span><span class="s1">&#39;GTiff&#39;</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">nodata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Aggregates a raster to (usually) a coarser grid cell size.</p>
<h5 id="pyspatialml.raster.Raster.aggregate--parameters">Parameters</h5>

<details class="out_shape-">
  <summary>tuple</summary>
  <p>New shape in (rows, cols).</p>
</details>
<details class="resampling-">
  <summary>str (default 'nearest')</summary>
  <p>Resampling method to use when applying decimated reads when
out_shape is specified. Supported methods are: 'average',
'bilinear', 'cubic', 'cubic_spline', 'gauss', 'lanczos',
'max', 'med', 'min', 'mode', 'q1', 'q3'.</p>
</details>
<details class="file_path-">
  <summary>str (optional, default None)</summary>
  <p>File path to save to cropped raster. If not supplied then
the aggregated raster is saved to a temporary file.</p>
</details>
<details class="in_memory-">
  <summary>bool, default is False</summary>
  <p>Whether to initiated the Raster from an array and store
the data in-memory using Rasterio's in-memory files.</p>
</details>
<details class="driver-">
  <summary>str (default 'GTiff')</summary>
  <p>Named of GDAL-supported driver for file export.</p>
</details>
<details class="dtype-">
  <summary>str (optional, default None)</summary>
  <p>Coerce RasterLayers to the specified dtype. If not
specified then the new intersected Raster is created using
the dtype of the existing Raster dataset, which uses a
dtype that can accommodate the data types of all of the
individual RasterLayers.</p>
</details>
<details class="nodata-">
  <summary>any number (optional, default None)</summary>
  <p>Nodata value for new dataset. If not specified then a
nodata value is set based on the minimum permissible value
of the Raster's dtype. Note that this does not change the
pixel nodata values of the raster, it only changes the
metadata of what value represents a nodata pixel.</p>
</details>
<details class="kwargs-">
  <summary>opt</summary>
  <p>Optional named arguments to pass to the format drivers. For
example can be <code>compress="deflate"</code> to add compression.</p>
</details>      <h5 id="pyspatialml.raster.Raster.aggregate--returns">Returns</h5>
<p>Raster
    Raster object aggregated to a new pixel size.</p>

  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.raster.Raster.alter" class="doc doc-heading">
<code class="highlight language-python"><span class="n">alter</span><span class="p">(</span><span class="n">transformer</span><span class="p">,</span> <span class="n">file_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">in_memory</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">driver</span><span class="o">=</span><span class="s1">&#39;GTiff&#39;</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">nodata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">progress</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Apply a fitted scikit-learn transformer to a Raster object.</p>
<p>Can be used to transform a raster using methods such as StandardScaler,
RobustScaler etc.</p>
<h5 id="pyspatialml.raster.Raster.alter--parameters">Parameters</h5>
<p>transformer : a sklearn.preprocessing.Transformer object</p>

<details class="file_path-">
  <summary>str (optional, default None)</summary>
  <p>Path to a GeoTiff raster for the prediction results. If
not specified then the output is written to a temporary
file.</p>
</details>
<details class="in_memory-">
  <summary>bool, default is False</summary>
  <p>Whether to initiated the Raster from an array and store the
data in-memory using Rasterio's in-memory files.</p>
</details>
<details class="driver-">
  <summary>str (default 'GTiff')</summary>
  <p>Named of GDAL-supported driver for file export.</p>
</details>
<details class="dtype-">
  <summary>str (optional, default None)</summary>
  <p>Optionally specify a GDAL compatible data type when saving
to file. If not specified, a data type is set based on the
data type of the prediction.</p>
</details>
<details class="nodata-">
  <summary>any number (optional, default None)</summary>
  <p>Nodata value for file export. If not specified then the
nodata value is derived from the minimum permissible value
for the given data type.</p>
</details>
<details class="progress-">
  <summary>bool (default False)</summary>
  <p>Show progress bar for operation.</p>
</details>      <h5 id="pyspatialml.raster.Raster.alter--returns">Returns</h5>
<p>Pyspatialml.Raster object with transformed data.</p>

  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.raster.Raster.append" class="doc doc-heading">
<code class="highlight language-python"><span class="n">append</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">in_place</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Method to add new RasterLayers to a Raster object.</p>
<p>Note that this modifies the Raster object in-place by default.</p>
<h5 id="pyspatialml.raster.Raster.append--parameters">Parameters</h5>

<details class="other-">
  <summary>Raster object, or list of Raster objects</summary>
  <p>Object to append to the Raster.</p>
</details>
<details class="in_place-">
  <summary>bool (default False)</summary>
  <p>Whether to change the Raster object in-place or leave
original and return a new Raster object.</p>
</details>      <h5 id="pyspatialml.raster.Raster.append--returns">Returns</h5>
<p>Raster
    Returned only if <code>in_place</code> is False</p>

  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.raster.Raster.apply" class="doc doc-heading">
<code class="highlight language-python"><span class="n">apply</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="n">file_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">in_memory</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">driver</span><span class="o">=</span><span class="s1">&#39;GTiff&#39;</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">nodata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">progress</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">function_args</span><span class="o">=</span><span class="p">{},</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Apply user-supplied function to a Raster object.</p>
<h5 id="pyspatialml.raster.Raster.apply--parameters">Parameters</h5>

<details class="function-">
  <summary>function</summary>
  <p>Function that takes an numpy array as a single argument.</p>
</details>
<details class="file_path-">
  <summary>str (optional, default None)</summary>
  <p>Optional path to save calculated Raster object. If not
specified then a tempfile is used.</p>
</details>
<details class="in_memory-">
  <summary>bool, default is False</summary>
  <p>Whether to initiated the Raster from an array and store the
data in-memory using Rasterio's in-memory files.</p>
</details>
<details class="driver-">
  <summary>str (default 'GTiff')</summary>
  <p>Named of GDAL-supported driver for file export.</p>
</details>
<details class="dtype-">
  <summary>str (optional, default None)</summary>
  <p>Coerce RasterLayers to the specified dtype. If not
specified then the new Raster is created using the dtype of
the calculation result.</p>
</details>
<details class="nodata-">
  <summary>any number (optional, default None)</summary>
  <p>Nodata value for new dataset. If not specified then a
nodata value is set based on the minimum permissible value
of the Raster's data type. Note that this changes the
values of the pixels that represent nodata pixels.</p>
</details>
<details class="progress-">
  <summary>bool (default False)</summary>
  <p>Optionally show progress of transform operations.</p>
</details>
<details class="function_args-">
  <summary>dict (optional)</summary>
  <p>Optionally pass arguments to the <code>function</code> as a dict or
keyword arguments.</p>
</details>
<details class="kwargs-">
  <summary>opt</summary>
  <p>Optional named arguments to pass to the format drivers.
For example can be <code>compress="deflate"</code> to add compression.</p>
</details>      <h5 id="pyspatialml.raster.Raster.apply--returns">Returns</h5>
<p>Raster
    Raster containing the calculated result.</p>

  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.raster.Raster.block_shape" class="doc doc-heading">
<code class="highlight language-python"><span class="n">block_shape</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-writable"><code>writable</code></small>
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return the block shape in (height, width) used to read windows from the
Raster</p>

  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.raster.Raster.block_shapes" class="doc doc-heading">
<code class="highlight language-python"><span class="n">block_shapes</span><span class="p">(</span><span class="n">rows</span><span class="p">,</span> <span class="n">cols</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Generator for windows for optimal reading and writing based
on the raster format Windows and returns as a tuple with xoff,
yoff, width, height.</p>
<h5 id="pyspatialml.raster.Raster.block_shapes--parameters">Parameters</h5>

<details class="rows-">
  <summary>int</summary>
  <p>Height of window in rows.</p>
</details>
<details class="cols-">
  <summary>int</summary>
  <p>Width of window in columns.</p>
</details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.raster.Raster.bounds" class="doc doc-heading">
<code class="highlight language-python"><span class="n">bounds</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return the bounding box of the raster in (left, bottom, right, top)</p>

  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.raster.Raster.close" class="doc doc-heading">
<code class="highlight language-python"><span class="n">close</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Close all of the RasterLayer objects in the Raster.</p>
<p>Note that this will cause any rasters based on temporary files
to be removed. This is intended as a method of clearing
temporary files that may have accumulated during an analysis
session.</p>

  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.raster.Raster.copy" class="doc doc-heading">
<code class="highlight language-python"><span class="n">copy</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Creates a shallow copy of a Raster object</p>
<p>Note that shallow in the context of a Raster object means that
an immutable copy of the object is made, however the on-disk and
in-memory file locations remain the same.</p>
<h5 id="pyspatialml.raster.Raster.copy--parameters">Parameters</h5>

<details class="subset-">
  <summary>opt</summary>
  <p>A list of layer names to subset while copying.</p>
</details>      <h5 id="pyspatialml.raster.Raster.copy--returns">Returns</h5>
<p>Raster</p>

  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.raster.Raster.count" class="doc doc-heading">
<code class="highlight language-python"><span class="n">count</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return the number of layers in the Raster</p>

  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.raster.Raster.crop" class="doc doc-heading">
<code class="highlight language-python"><span class="n">crop</span><span class="p">(</span><span class="n">bounds</span><span class="p">,</span> <span class="n">file_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">in_memory</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">driver</span><span class="o">=</span><span class="s1">&#39;GTiff&#39;</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">nodata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Crops a Raster object by the supplied bounds.</p>
<h5 id="pyspatialml.raster.Raster.crop--parameters">Parameters</h5>

<details class="bounds-">
  <summary>tuple</summary>
  <p>A tuple containing the bounding box to clip by in the form
of (xmin, ymin, xmax, ymax).</p>
</details>
<details class="file_path-">
  <summary>str (optional, default None)</summary>
  <p>File path to save to cropped raster. If not supplied then
the cropped raster is saved to a temporary file.</p>
</details>
<details class="in_memory-">
  <summary>bool, default is False</summary>
  <p>Whether to initiated the Raster from an array and store
the data in-memory using Rasterio's in-memory files.</p>
</details>
<details class="driver-">
  <summary>str (default 'GTiff'). Default is 'GTiff'</summary>
  <p>Named of GDAL-supported driver for file export.</p>
</details>
<details class="dtype-">
  <summary>str (optional, default None)</summary>
  <p>Coerce RasterLayers to the specified dtype. If not
specified then the new intersected Raster is created using
the dtype of theexisting Raster dataset, which uses a
dtype that can accommodate the data types of all of the
individual RasterLayers.</p>
</details>
<details class="nodata-">
  <summary>any number (optional, default None)</summary>
  <p>Nodata value for new dataset. If not specified then a
nodata value is set based on the minimum permissible value
of the Raster's data type. Note that this does not change
the pixel nodata values of the raster, it only changes
the metadata of what value represents a nodata pixel.</p>
</details>
<details class="kwargs-">
  <summary>opt</summary>
  <p>Optional named arguments to pass to the format drivers.
For example can be <code>compress="deflate"</code> to add compression.</p>
</details>      <h5 id="pyspatialml.raster.Raster.crop--returns">Returns</h5>
<p>Raster
    Raster cropped to new extent.</p>

  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.raster.Raster.crs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">crs</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-writable"><code>writable</code></small>
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return to crs of the Raster</p>

  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.raster.Raster.drop" class="doc doc-heading">
<code class="highlight language-python"><span class="n">drop</span><span class="p">(</span><span class="n">labels</span><span class="p">,</span> <span class="n">in_place</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Drop individual RasterLayers from a Raster object</p>
<p>Note that this modifies the Raster object in-place by default.</p>
<h5 id="pyspatialml.raster.Raster.drop--parameters">Parameters</h5>

<details class="labels-">
  <summary>single label or list-like</summary>
  <p>Index (int) or layer name to drop. Can be a single integer
or label, or a list of integers or labels.</p>
</details>
<details class="in_place-">
  <summary>bool (default False)</summary>
  <p>Whether to change the Raster object in-place or leave
original and return a new Raster object.</p>
</details>      <h5 id="pyspatialml.raster.Raster.drop--returns">Returns</h5>
<p>pyspatialml.Raster
    Returned only if <code>in_place</code> is True</p>

  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.raster.Raster.dtypes" class="doc doc-heading">
<code class="highlight language-python"><span class="n">dtypes</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return the dtype of each layer in the Raster as a list</p>

  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.raster.Raster.extract_raster" class="doc doc-heading">
<code class="highlight language-python"><span class="n">extract_raster</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">progress</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Sample a Raster object by an aligned raster of labelled pixels.</p>
<h5 id="pyspatialml.raster.Raster.extract_raster--parameters">Parameters</h5>

<details class="src">
  <summary>rasterio DatasetReader</summary>
  <p>Single band raster containing labelled pixels as an open
rasterio DatasetReader object.</p>
</details>
<details class="progress-">
  <summary>bool (opt), default=False</summary>
  <p>Show a progress bar for extraction.</p>
</details>      <h5 id="pyspatialml.raster.Raster.extract_raster--returns">Returns</h5>
<p>geopandas.GeoDataFrame
    Geodataframe containing extracted data as point features if
    <code>return_array=False</code></p>

  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.raster.Raster.extract_vector" class="doc doc-heading">
<code class="highlight language-python"><span class="n">extract_vector</span><span class="p">(</span><span class="n">gdf</span><span class="p">,</span> <span class="n">progress</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Sample a Raster/RasterLayer using a geopandas GeoDataframe
containing points, lines or polygon features.</p>
<h5 id="pyspatialml.raster.Raster.extract_vector--parameters">Parameters</h5>

<details class="gdf">
  <summary>geopandas.GeoDataFrame</summary>
  <p>Containing either point, line or polygon geometries.
Overlapping geometries will cause the same pixels to be
sampled.</p>
</details>
<details class="progress-">
  <summary>bool (opt), default=False</summary>
  <p>Show a progress bar for extraction.</p>
</details>      <h5 id="pyspatialml.raster.Raster.extract_vector--returns">Returns</h5>
<p>geopandas.GeoDataframe
    Containing extracted data as point geometries (one point
    per pixel). The resulting GeoDataFrame is indexed using
    a named pandas.MultiIndex, with <code>pixel_idx</code> index
    referring to the index of each pixel that was sampled, and
    the <code>geometry_idx</code> index referring to the index of the each
    geometry in the supplied <code>gdf</code>. This makes it possible to
    keep track of how sampled pixel relates to the original
    geometries, i.e. multiple pixels being extracted within
    the area of a single polygon that can be referred to using
    the <code>geometry_idx</code>.</p>
<pre><code>The extracted data can subsequently be joined with the
attribute table of the supplied `gdf` using:

training_py = geopandas.read_file(nc.polygons)
df = self.stack.extract_vector(gdf=training_py)
df = df.dropna()

df = df.merge(
    right=training_py.loc[:, ("id", "label")],
    left_on="polygon_idx",
    right_on="id",
    right_index=True
)
</code></pre>

  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.raster.Raster.extract_xy" class="doc doc-heading">
<code class="highlight language-python"><span class="n">extract_xy</span><span class="p">(</span><span class="n">xys</span><span class="p">,</span> <span class="n">return_array</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">progress</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Samples pixel values using an array of xy locations.</p>
<h5 id="pyspatialml.raster.Raster.extract_xy--parameters">Parameters</h5>

<details class="xys-">
  <summary>2d array-like</summary>
  <p>x and y coordinates from which to sample the raster
(n_samples, xys).</p>
</details>
<details class="return_array-">
  <summary>bool (opt), default=False</summary>
  <p>By default the extracted pixel values are returned as a
geopandas.GeoDataFrame. If <code>return_array=True</code> then the
extracted pixel values are returned as a tuple of
numpy.ndarrays.</p>
</details>
<details class="progress-">
  <summary>bool (opt), default=False</summary>
  <p>Show a progress bar for extraction.</p>
</details>      <h5 id="pyspatialml.raster.Raster.extract_xy--returns">Returns</h5>
<p>geopandas.GeoDataframe
    Containing extracted data as point geometries if
    <code>return_array=False</code>.</p>
<p>numpy.ndarray
    2d masked array containing sampled raster values (sample,
    bands) at the x,y locations.</p>

  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.raster.Raster.head" class="doc doc-heading">
<code class="highlight language-python"><span class="n">head</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return the first 10 rows from the Raster as a ndarray</p>

  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.raster.Raster.height" class="doc doc-heading">
<code class="highlight language-python"><span class="n">height</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return the height (number of rows) in the Raster</p>

  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.raster.Raster.intersect" class="doc doc-heading">
<code class="highlight language-python"><span class="n">intersect</span><span class="p">(</span><span class="n">file_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">in_memory</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">driver</span><span class="o">=</span><span class="s1">&#39;GTiff&#39;</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">nodata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Perform a intersect operation on the Raster object.</p>
<p>Computes the geometric intersection of the RasterLayers with
the Raster object. This will cause nodata values in any of
the rasters to be propagated through all of the output rasters.</p>
<h5 id="pyspatialml.raster.Raster.intersect--parameters">Parameters</h5>

<details class="file_path-">
  <summary>str (optional, default None)</summary>
  <p>File path to save to resulting Raster. If not supplied then
the resulting Raster is saved to a temporary file.</p>
</details>
<details class="in_memory-">
  <summary>bool, default is False</summary>
  <p>Whether to initiated the Raster from an array and store the
data in-memory using Rasterio's in-memory files.</p>
</details>
<details class="driver-">
  <summary>str (default 'GTiff')</summary>
  <p>Named of GDAL-supported driver for file export.</p>
</details>
<details class="dtype-">
  <summary>str (optional, default None)</summary>
  <p>Coerce RasterLayers to the specified dtype. If not
specified then the new intersected Raster is created using
the dtype of the existing Raster dataset, which uses a
dtype that can accommodate the data types of all of the
individual RasterLayers.</p>
</details>
<details class="nodata-">
  <summary>any number (optional, default None)</summary>
  <p>Nodata value for new dataset. If not specified then a
nodata value is set based on the minimum permissible value
of the Raster's data type. Note that this changes the
values of the pixels that represent nodata to the new
value.</p>
</details>
<details class="kwargs-">
  <summary>opt</summary>
  <p>Optional named arguments to pass to the format drivers.
For example can be <code>compress="deflate"</code> to add compression.</p>
</details>      <h5 id="pyspatialml.raster.Raster.intersect--returns">Returns</h5>
<p>Raster
    Raster with layers that are masked based on a union of all
    masks in the suite of RasterLayers.</p>

  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.raster.Raster.mask" class="doc doc-heading">
<code class="highlight language-python"><span class="n">mask</span><span class="p">(</span><span class="n">shapes</span><span class="p">,</span> <span class="n">invert</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">crop</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">pad</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">file_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">in_memory</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">driver</span><span class="o">=</span><span class="s1">&#39;GTiff&#39;</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">nodata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Mask a Raster object based on the outline of shapes in a
geopandas.GeoDataFrame</p>
<h5 id="pyspatialml.raster.Raster.mask--parameters">Parameters</h5>

<details class="shapes-">
  <summary>geopandas.GeoDataFrame</summary>
  <p>GeoDataFrame containing masking features.</p>
</details>
<details class="invert-">
  <summary>bool (default False)</summary>
  <p>If False then pixels outside shapes will be masked. If True
then pixels inside shape will be masked.</p>
</details>
<details class="crop-">
  <summary>bool (default True)</summary>
  <p>Crop the raster to the extent of the shapes.</p>
</details>
<details class="pad-">
  <summary>bool (default False)</summary>
  <p>If True, the features will be padded in each direction by
one half of a pixel prior to cropping raster.</p>
</details>
<details class="file_path-">
  <summary>str (optional, default None)</summary>
  <p>File path to save to resulting Raster. If not supplied
then the resulting Raster is saved to a temporary file.</p>
</details>
<details class="in_memory-">
  <summary>bool, default is False</summary>
  <p>Whether to initiated the Raster from an array and store
the data in-memory using Rasterio's in-memory files.</p>
</details>
<details class="driver-">
  <summary>str (default 'GTiff')</summary>
  <p>Named of GDAL-supported driver for file export.</p>
</details>
<details class="dtype-">
  <summary>str (optional, default None)</summary>
  <p>Coerce RasterLayers to the specified dtype. If not
specified then the cropped Raster is created using the
existing dtype, which usesa dtype that can accommodate the
data types of all of the individual RasterLayers.</p>
</details>
<details class="nodata-">
  <summary>any number (optional, default None)</summary>
  <p>Nodata value for cropped dataset. If not specified then a
nodata value is set based on the minimum permissible value
of the Raster's data type. Note that this changes the
values of the pixels to the new nodata value, and changes
the metadata of the raster.</p>
</details>
<details class="kwargs-">
  <summary>opt</summary>
  <p>Optional named arguments to pass to the format drivers.
For example can be <code>compress="deflate"</code> to add compression.</p>
</details>      <h5 id="pyspatialml.raster.Raster.mask--returns">Returns</h5>
<p>pyspatialml.Raster
    Raster with masked layers.</p>

  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.raster.Raster.nodatavals" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nodatavals</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return the nodata value of each layer in the Raster as a list</p>

  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.raster.Raster.predict" class="doc doc-heading">
<code class="highlight language-python"><span class="n">predict</span><span class="p">(</span><span class="n">estimator</span><span class="p">,</span> <span class="n">file_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">in_memory</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">driver</span><span class="o">=</span><span class="s1">&#39;GTiff&#39;</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">nodata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">progress</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">constants</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Apply prediction of a scikit learn model to a Raster.</p>
<p>The model can represent any scikit learn model or compatible
api with a <code>fit</code> and <code>predict</code> method. These can consist of
classification or regression models. Multi-class
classifications and multi-target regressions are also
supported.</p>
<h5 id="pyspatialml.raster.Raster.predict--parameters">Parameters</h5>

<details class="estimator-">
  <summary>estimator object implementing 'fit'</summary>
  <p>The object to use to fit the data.</p>
</details>
<details class="file_path-">
  <summary>str (optional, default None)</summary>
  <p>Path to a GeoTiff raster for the prediction results. If
not specified then the output is written to a temporary
file.</p>
</details>
<details class="in_memory-">
  <summary>bool, default is False</summary>
  <p>Whether to initiated the Raster from an array and store
the data in-memory using Rasterio's in-memory files.</p>
</details>
<details class="driver-">
  <summary>str (default 'GTiff')</summary>
  <p>Named of GDAL-supported driver for file export</p>
</details>
<details class="dtype-">
  <summary>str (optional, default None)</summary>
  <p>Optionally specify a GDAL compatible data type when saving
to file. If not specified, np.float32 is assumed.</p>
</details>
<details class="nodata-">
  <summary>any number (optional, default None)</summary>
  <p>Nodata value for file export. If not specified then the
nodata value is derived from the minimum permissible value
for the given data type.</p>
</details>
<details class="progress-">
  <summary>bool (default False)</summary>
  <p>Show progress bar for prediction.</p>
</details>
<details class="constants">
  <summary>list-like object or a dict (optional, default None)</summary>
  <p>Constant features to add to the Raster object with each value
in a list or 1d ndarray representing an additional feature.</p>
<p>If a list-like object of values os passed, then each numeric
value will be appended as constant features to the last
columns in the data. It is therefore important that all
features including constant features are present in the same
order as what was used to train the model.</p>
<p>If a dict is passed, then the keys of the dict must refer to
the names of raster layers in the Raster object. In this case,
the values of the dict will replace the values of the raster
layers in the Raster object.</p>
</details>
<details class="kwargs-">
  <summary>opt</summary>
  <p>Optional named arguments to pass to the format drivers.
For example can be <code>compress="deflate"</code> to add compression.</p>
</details>      <h5 id="pyspatialml.raster.Raster.predict--returns">Returns</h5>
<p>Raster
    Raster object containing prediction results as a
    RasterLayers. For classification and regression models, the
    Raster will contain a single RasterLayer, unless the model
    is multi-class or multi-target. Layers are named
    automatically as <code>pred_raw_n</code> with n = 1, 2, 3 ..n.</p>

  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.raster.Raster.predict_proba" class="doc doc-heading">
<code class="highlight language-python"><span class="n">predict_proba</span><span class="p">(</span><span class="n">estimator</span><span class="p">,</span> <span class="n">file_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">in_memory</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">indexes</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">driver</span><span class="o">=</span><span class="s1">&#39;GTiff&#39;</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">nodata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">constants</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">progress</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Apply class probability prediction of a scikit learn model to a Raster.</p>
<h5 id="pyspatialml.raster.Raster.predict_proba--parameters">Parameters</h5>

<details class="estimator-">
  <summary>estimator object implementing 'fit'</summary>
  <p>The object to use to fit the data.</p>
</details>
<details class="file_path-">
  <summary>str (optional, default None)</summary>
  <p>Path to a GeoTiff raster for the prediction results. If not
specified then the output is written to a temporary file.</p>
</details>
<details class="in_memory-">
  <summary>bool, default is False</summary>
  <p>Whether to initiated the Raster from an array and store the
data in-memory using Rasterio's in-memory files.</p>
</details>
<details class="indexes-">
  <summary>list of integers (optional, default None)</summary>
  <p>List of class indices to export. In some circumstances,
only a subset of the class probability estimations are
desired, for instance when performing a binary
classification only the probabilities for the positive
class may be desired.</p>
</details>
<details class="driver-">
  <summary>str (default 'GTiff')</summary>
  <p>Named of GDAL-supported driver for file export.</p>
</details>
<details class="dtype-">
  <summary>str (optional, default None)</summary>
  <p>Optionally specify a GDAL compatible data type when saving
to file. If not specified, a data type is set based on the
data type of the prediction.</p>
</details>
<details class="nodata-">
  <summary>any number (optional, default None)</summary>
  <p>Nodata value for file export. If not specified then the
nodata value is derived from the minimum permissible value
for the given data type.</p>
</details>
<details class="progress-">
  <summary>bool (default False)</summary>
  <p>Show progress bar for prediction.</p>
</details>
<details class="constants">
  <summary>list-like object or a dict (optional, default None)</summary>
  <p>Constant features to add to the Raster object with each value
in a list or 1d ndarray representing an additional feature.</p>
<p>If a list-like object of values os passed, then each numeric
value will be appended as constant features to the last
columns in the data. It is therefore important that all
features including constant features are present in the same
order as what was used to train the model.</p>
<p>If a dict is passed, then the keys of the dict must refer to
the names of raster layers in the Raster object. In this case,
the values of the dict will replace the values of the raster
layers in the Raster object.</p>
</details>
<details class="kwargs-">
  <summary>opt</summary>
  <p>Optional named arguments to pass to the format drivers.
For example can be <code>compress="deflate"</code> to add compression.</p>
</details>      <h5 id="pyspatialml.raster.Raster.predict_proba--returns">Returns</h5>
<p>Raster
    Raster containing predicted class probabilities. Each
    predicted class is represented by a RasterLayer object.
    The RasterLayers are named <code>prob_n</code> for 1,2,3..n, with <code>n</code>
    based on the index position of the classes, not the number
    of the class itself.</p>
<pre><code>For example, a classification model predicting classes with
integer values of 1, 3, and 5 would result in three
RasterLayers named 'prob_1', 'prob_2' and 'prob_3'.
</code></pre>

  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.raster.Raster.read" class="doc doc-heading">
<code class="highlight language-python"><span class="n">read</span><span class="p">(</span><span class="n">masked</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">window</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">out_shape</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">resampling</span><span class="o">=</span><span class="s1">&#39;nearest&#39;</span><span class="p">,</span> <span class="n">as_df</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Reads data from the Raster object into a numpy array.</p>
<h5 id="pyspatialml.raster.Raster.read--parameters">Parameters</h5>

<details class="masked-">
  <summary>bool (default False)</summary>
  <p>Read data into a masked array.</p>
</details>
<details class="window-">
  <summary>rasterio.window.Window object (optional, default None)</summary>
  <p>Tuple of col_off, row_off, width, height of a window of
data to read a chunk of data into a ndarray.</p>
</details>
<details class="out_shape-">
  <summary>tuple (optional, default None)</summary>
  <p>Shape of shape of array (rows, cols) to read data into
using decimated reads.</p>
</details>
<details class="resampling-">
  <summary>str (default 'nearest')</summary>
  <p>Resampling method to use when applying decimated reads when
out_shape is specified. Supported methods are: 'average',
'bilinear', 'cubic', 'cubic_spline', 'gauss', 'lanczos',
'max', 'med', 'min', 'mode', 'q1', 'q3'.</p>
</details>
<details class="as_df-">
  <summary>bool (default False)</summary>
  <p>Whether to return the data as a pandas.DataFrame with
columns named by the RasterLayer names.</p>
</details>      <p>**kwargs : dict
    Other arguments to pass to rasterio.DatasetReader.read method</p>
<h5 id="pyspatialml.raster.Raster.read--returns">Returns</h5>
<p>ndarray
    Raster values in 3d ndarray  with the dimensions in order
    of (band, row, and column).</p>

  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.raster.Raster.rename" class="doc doc-heading">
<code class="highlight language-python"><span class="n">rename</span><span class="p">(</span><span class="n">names</span><span class="p">,</span> <span class="n">in_place</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Rename a RasterLayer within the Raster object.</p>
<h5 id="pyspatialml.raster.Raster.rename--parameters">Parameters</h5>

<details class="names-">
  <summary>dict</summary>
  <p>dict of old_name : new_name</p>
</details>
<details class="in_place-">
  <summary>bool (default False)</summary>
  <p>Whether to change names of the Raster object in-place or
leave original and return a new Raster object.</p>
</details>      <h5 id="pyspatialml.raster.Raster.rename--returns">Returns</h5>
<p>pyspatialml.Raster
    Returned only if <code>in_place</code> is False</p>

  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.raster.Raster.res" class="doc doc-heading">
<code class="highlight language-python"><span class="n">res</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return a tuple of the resolution of the Raster in (width, height)</p>

  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.raster.Raster.sample" class="doc doc-heading">
<code class="highlight language-python"><span class="n">sample</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">strata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">return_array</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Generates a random sample of according to size, and samples
the pixel values.</p>
<h5 id="pyspatialml.raster.Raster.sample--parameters">Parameters</h5>

<details class="size-">
  <summary>int</summary>
  <p>Number of random samples or number of samples per strata if
a <code>strata</code> object is supplied.</p>
</details>
<details class="strata-">
  <summary>pyspatialml Raster object (opt)</summary>
  <p>Whether to use stratified instead of random sampling. Strata
can be supplied using another pyspatialml.Raster object.</p>
</details>
<details class="return_array-">
  <summary>bool (opt), default=False</summary>
  <p>Optionally return extracted data as separate X and xy
masked numpy arrays.</p>
</details>
<details class="random_state-">
  <summary>int (opt)</summary>
  <p>integer to use within random.seed.</p>
</details>      <h5 id="pyspatialml.raster.Raster.sample--returns">Returns</h5>
<p>pandas.DataFrame
    DataFrame containing values of names of RasterLayers in the Raster
    if <code>return_array</code> is False.</p>
<p>tuple
    A tuple containing two elements if <code>return_array</code> is True:</p>
<pre><code>- numpy.ndarray
    Numpy array of extracted raster values, typically 2d.
- numpy.ndarray
    2D numpy array of xy coordinates of extracted values.
</code></pre>

  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.raster.Raster.scale" class="doc doc-heading">
<code class="highlight language-python"><span class="n">scale</span><span class="p">(</span><span class="n">centre</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">file_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">in_memory</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">driver</span><span class="o">=</span><span class="s1">&#39;GTiff&#39;</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">nodata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">progress</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Standardize (centre and scale) a Raster object by
subtracting the mean and dividing by the standard deviation for
each layer in the object.</p>
<p>The mean and standard deviation statistics are calculated
for each layer separately.</p>
<h5 id="pyspatialml.raster.Raster.scale--parameters">Parameters</h5>

<details class="centre-">
  <summary>bool, default is True</summary>
  <p>Whether to subtract the mean from each layer.</p>
</details>
<details class="scale-">
  <summary>bool, default is True</summary>
  <p>Whether to divide each layer by the standard deviation of
the layer.</p>
</details>
<details class="file_path-">
  <summary>str (optional, default None)</summary>
  <p>Path to a GeoTiff raster for the prediction results. If
not specified then the output is written to a temporary
file.</p>
</details>
<details class="in_memory-">
  <summary>bool, default is False</summary>
  <p>Whether to initiated the Raster from an array and store the
data in-memory using Rasterio's in-memory files.</p>
</details>
<details class="driver-">
  <summary>str (default 'GTiff')</summary>
  <p>Named of GDAL-supported driver for file export.</p>
</details>
<details class="dtype-">
  <summary>str (optional, default None)</summary>
  <p>Optionally specify a GDAL compatible data type when saving
to file. If not specified, a data type is set based on the
data type of the prediction.</p>
</details>
<details class="nodata-">
  <summary>any number (optional, default None)</summary>
  <p>Nodata value for file export. If not specified then the
nodata value is derived from the minimum permissible value
for the given data type.</p>
</details>
<details class="progress-">
  <summary>bool (default False)</summary>
  <p>Show progress bar for operation.</p>
</details>      <h5 id="pyspatialml.raster.Raster.scale--returns">Returns</h5>
<p>Pyspatialml.Raster object with rescaled data.</p>

  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.raster.Raster.set_block_shape" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_block_shape</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Set the block shape of the raster, i.e. the height and width
of windows to read in chunks for the predict, predict_proba,
apply, and other supported-methods.</p>
<p>Note block shape can also be set with <code>myraster.block_shape = (500, 500)</code></p>
<h5 id="pyspatialml.raster.Raster.set_block_shape--parameters">Parameters</h5>

<details class="value-">
  <summary>tuple</summary>
  <p>A tuple of (height, width) for the block window</p>
</details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.raster.Raster.shape" class="doc doc-heading">
<code class="highlight language-python"><span class="n">shape</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return the shape (height, width) of the Raster</p>

  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.raster.Raster.tail" class="doc doc-heading">
<code class="highlight language-python"><span class="n">tail</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return the last 10 rows from the Raster as a ndarray</p>

  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.raster.Raster.to_crs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">to_crs</span><span class="p">(</span><span class="n">crs</span><span class="p">,</span> <span class="n">resampling</span><span class="o">=</span><span class="s1">&#39;nearest&#39;</span><span class="p">,</span> <span class="n">file_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">in_memory</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">driver</span><span class="o">=</span><span class="s1">&#39;GTiff&#39;</span><span class="p">,</span> <span class="n">nodata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">n_jobs</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">warp_mem_lim</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">progress</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Reprojects a Raster object to a different crs.</p>
<h5 id="pyspatialml.raster.Raster.to_crs--parameters">Parameters</h5>

<details class="crs-">
  <summary>rasterio.transform.CRS object, or dict</summary>
  <p>Example: CRS({'init': 'EPSG:4326'})</p>
</details>
<details class="resampling-">
  <summary>str (default 'nearest')</summary>
  <p>Resampling method to use.  One of the following:
nearest,
bilinear,
cubic,
cubic_spline,
lanczos,
average,
mode,
max (GDAL &gt;= 2.2),
min (GDAL &gt;= 2.2),
med (GDAL &gt;= 2.2),
q1 (GDAL &gt;= 2.2),
q3 (GDAL &gt;= 2.2)</p>
</details>
<details class="file_path-">
  <summary>str (optional, default None)</summary>
  <p>Optional path to save reprojected Raster object. If not
specified then a tempfile is used.</p>
</details>
<details class="in_memory-">
  <summary>bool, default is False</summary>
  <p>Whether to initiated the Raster from an array and store the
data in-memory using Rasterio's in-memory files.</p>
</details>
<details class="driver-">
  <summary>str (default 'GTiff')</summary>
  <p>Named of GDAL-supported driver for file export.</p>
</details>
<details class="nodata-">
  <summary>any number (optional, default None)</summary>
  <p>Nodata value for new dataset. If not specified then the
existing nodata value of the Raster object is used, which
can accommodate the dtypes of the individual layers in the
Raster.</p>
</details>
<details class="n_jobs-">
  <summary>int (default 1)</summary>
  <p>The number of warp worker threads.</p>
</details>
<details class="warp_mem_lim-">
  <summary>int (default 0)</summary>
  <p>The warp operation memory limit in MB. Larger values allow
the warp operation to be carried out in fewer chunks. The
amount of memory required to warp a 3-band uint8 2000 row
x 2000 col raster to a destination of the same size is
approximately 56 MB. The default (0) means 64 MB with GDAL
2.2.</p>
</details>
<details class="progress-">
  <summary>bool (default False)</summary>
  <p>Optionally show progress of transform operations.</p>
</details>
<details class="kwargs-">
  <summary>opt</summary>
  <p>Optional named arguments to pass to the format drivers.
For example can be <code>compress="deflate"</code> to add compression.</p>
</details>      <h5 id="pyspatialml.raster.Raster.to_crs--returns">Returns</h5>
<p>Raster
    Raster following reprojection.</p>

  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.raster.Raster.to_pandas" class="doc doc-heading">
<code class="highlight language-python"><span class="n">to_pandas</span><span class="p">(</span><span class="n">max_pixels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">resampling</span><span class="o">=</span><span class="s1">&#39;nearest&#39;</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Raster to pandas DataFrame.</p>
<h5 id="pyspatialml.raster.Raster.to_pandas--parameters">Parameters</h5>

<details class="max_pixels">
  <summary>int (default None)</summary>
  <p>Maximum number of pixels to sample. By default all pixels
are used.</p>
</details>
<details class="resampling-">
  <summary>str (default 'nearest')</summary>
  <p>Resampling method to use when applying decimated reads when
out_shape is specified. Supported methods are: 'average',
'bilinear', 'cubic', 'cubic_spline', 'gauss', 'lanczos',
'max', 'med', 'min', 'mode', 'q1', 'q3'.</p>
</details>      <h5 id="pyspatialml.raster.Raster.to_pandas--returns">Returns</h5>
<p>pandas.DataFrame
    DataFrame containing values of names of RasterLayers in
    the Raster as columns, and pixel values as rows.</p>

  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.raster.Raster.transform" class="doc doc-heading">
<code class="highlight language-python"><span class="n">transform</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-writable"><code>writable</code></small>
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return the transform of the Raster</p>

  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.raster.Raster.width" class="doc doc-heading">
<code class="highlight language-python"><span class="n">width</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return the width (number of columns) in the Raster</p>

  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.raster.Raster.write" class="doc doc-heading">
<code class="highlight language-python"><span class="n">write</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">driver</span><span class="o">=</span><span class="s1">&#39;GTiff&#39;</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">nodata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Write the Raster object to a file.</p>
<p>Overrides the write RasterBase class method, which is a partial
function of the rasterio.DatasetReader.write method.</p>
<h5 id="pyspatialml.raster.Raster.write--parameters">Parameters</h5>

<details class="file_path-">
  <summary>str</summary>
  <p>File path used to save the Raster object.</p>
</details>
<details class="driver-">
  <summary>str (default is 'GTiff').</summary>
  <p>Name of GDAL driver used to save Raster data.</p>
</details>
<details class="dtype-">
  <summary>str (opt, default None)</summary>
  <p>Optionally specify a numpy compatible data type when
saving to file. If not specified, a data type is selected
based on the data types of RasterLayers in the Raster
object.</p>
</details>
<details class="nodata-">
  <summary>any number (opt, default None)</summary>
  <p>Optionally assign a new nodata value when saving to file.
If not specified a nodata value based on the minimum
permissible value for the data types of RasterLayers in the
Raster object is used. Note that this does not change the
pixel nodata values of the raster, it only changes the
metadata of what value represents a nodata pixel.</p>
</details>
<details class="kwargs-">
  <summary>opt</summary>
  <p>Optional named arguments to pass to the format drivers.
For example can be <code>compress="deflate"</code> to add compression.</p>
</details>      <h5 id="pyspatialml.raster.Raster.write--returns">Returns</h5>
<p>Raster
    New Raster object from saved file.</p>

  </div>

</div>



  </div>

  </div>

</div>




  </div>

  </div>

</div>

<div class="doc doc-object doc-module">


<a id="pyspatialml.rasterlayer"></a>
  <div class="doc doc-contents first">

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="pyspatialml.rasterlayer.RasterLayer" class="doc doc-heading">
        <code>RasterLayer</code>


</h2>


  <div class="doc doc-contents ">

  
      <p>Represents a single raster band derived from a single or
multi-band raster dataset</p>
<p>Simple wrapper around a rasterio.Band object with additional
methods. Used because the Rasterio.Band.ds.read method reads
all bands from a multi-band dataset, whereas the RasterLayer read
method only reads a single band.</p>
<p>Methods encapsulated in RasterLayer objects represent those that
typically would only be applied to a single-band of a raster, i.e.
sieve-clump, distance to non-NaN pixels, or arithmetic operations
on individual layers.</p>
<h4 id="pyspatialml.rasterlayer.RasterLayer--attributes">Attributes</h4>

<details class="bidx-">
  <summary>int</summary>
  <p>The band index of the RasterLayer within the file dataset.</p>
</details>
<details class="dtype-">
  <summary>str</summary>
  <p>The data type of the RasterLayer.</p>
</details>
<details class="ds-">
  <summary>rasterio.band</summary>
  <p>The underlying rasterio.band object.</p>
</details>
<details class="name-">
  <summary>str</summary>
  <p>A syntactically valid name for the RasterLayer.</p>
</details>
<details class="file-">
  <summary>str</summary>
  <p>The file path to the dataset.</p>
</details>
<details class="nodata-">
  <summary>any number</summary>
  <p>The number that is used to represent nodata pixels in the
RasterLayer.</p>
</details>
<details class="driver-">
  <summary>str</summary>
  <p>The name of the GDAL format driver.</p>
</details>
<details class="meta-">
  <summary>dict</summary>
  <p>A python dict storing the RasterLayer metadata.</p>
</details>
<details class="transform-">
  <summary>affine.Affine object</summary>
  <p>The affine transform parameters.</p>
</details>
<details class="count-">
  <summary>int</summary>
  <p>Number of layers; always equal to 1.</p>
</details>
<details class="shape">
  <summary>tuple</summary>
  <p>Shape of RasterLayer in (rows, columns)</p>
</details>      <p>width, height: int
    The width (cols) and height (rows) of the dataset.</p>

<details class="bounds-">
  <summary>BoundingBox named tuple</summary>
  <p>A named tuple with left, bottom, right and top coordinates of
the dataset.</p>
</details>
<details class="cmap-">
  <summary>str</summary>
  <p>The name of matplotlib map, or a custom
matplotlib.cm.LinearSegmentedColormap or ListedColormap object.</p>
</details>
<details class="norm-">
  <summary>matplotlib.colors.Normalize (opt)</summary>
  <p>A matplotlib.colors.Normalize to apply to the RasterLayer.
This overides the norm attribute of the RasterLayer.</p>
</details>

        <details class="quote">
          <summary>Source code in <code>pyspatialml/rasterlayer.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">RasterLayer</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Represents a single raster band derived from a single or</span>
<span class="sd">    multi-band raster dataset</span>

<span class="sd">    Simple wrapper around a rasterio.Band object with additional</span>
<span class="sd">    methods. Used because the Rasterio.Band.ds.read method reads</span>
<span class="sd">    all bands from a multi-band dataset, whereas the RasterLayer read</span>
<span class="sd">    method only reads a single band.</span>

<span class="sd">    Methods encapsulated in RasterLayer objects represent those that</span>
<span class="sd">    typically would only be applied to a single-band of a raster, i.e.</span>
<span class="sd">    sieve-clump, distance to non-NaN pixels, or arithmetic operations</span>
<span class="sd">    on individual layers.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    bidx : int</span>
<span class="sd">        The band index of the RasterLayer within the file dataset.</span>

<span class="sd">    dtype : str</span>
<span class="sd">        The data type of the RasterLayer.</span>

<span class="sd">    ds : rasterio.band</span>
<span class="sd">        The underlying rasterio.band object.</span>

<span class="sd">    name : str</span>
<span class="sd">        A syntactically valid name for the RasterLayer.</span>

<span class="sd">    file : str</span>
<span class="sd">        The file path to the dataset.</span>

<span class="sd">    nodata : any number</span>
<span class="sd">        The number that is used to represent nodata pixels in the</span>
<span class="sd">        RasterLayer.</span>

<span class="sd">    driver : str</span>
<span class="sd">        The name of the GDAL format driver.</span>

<span class="sd">    meta : dict</span>
<span class="sd">        A python dict storing the RasterLayer metadata.</span>

<span class="sd">    transform : affine.Affine object</span>
<span class="sd">        The affine transform parameters.</span>

<span class="sd">    count : int</span>
<span class="sd">        Number of layers; always equal to 1.</span>

<span class="sd">    shape: tuple</span>
<span class="sd">        Shape of RasterLayer in (rows, columns)</span>

<span class="sd">    width, height: int</span>
<span class="sd">        The width (cols) and height (rows) of the dataset.</span>

<span class="sd">    bounds : BoundingBox named tuple</span>
<span class="sd">        A named tuple with left, bottom, right and top coordinates of</span>
<span class="sd">        the dataset.</span>

<span class="sd">    cmap : str</span>
<span class="sd">        The name of matplotlib map, or a custom</span>
<span class="sd">        matplotlib.cm.LinearSegmentedColormap or ListedColormap object.</span>

<span class="sd">    norm : matplotlib.colors.Normalize (opt)</span>
<span class="sd">        A matplotlib.colors.Normalize to apply to the RasterLayer.</span>
<span class="sd">        This overides the norm attribute of the RasterLayer.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">band</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initiate a RasterLayer object</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        band : a rasterio.Band object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bidx</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">bidx</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dtype</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">dtype</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ds</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">ds</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">band</span><span class="o">.</span><span class="n">ds</span><span class="o">.</span><span class="n">files</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">_make_name</span><span class="p">(</span><span class="n">band</span><span class="o">.</span><span class="n">ds</span><span class="o">.</span><span class="n">files</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">file</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">ds</span><span class="o">.</span><span class="n">files</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;in_memory&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">file</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">nodata</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">ds</span><span class="o">.</span><span class="n">nodata</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">driver</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">ds</span><span class="o">.</span><span class="n">meta</span><span class="p">[</span><span class="s2">&quot;driver&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">meta</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">ds</span><span class="o">.</span><span class="n">meta</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transform</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">ds</span><span class="o">.</span><span class="n">transform</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">crs</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">ds</span><span class="o">.</span><span class="n">crs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">shape</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">ds</span><span class="o">.</span><span class="n">width</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">ds</span><span class="o">.</span><span class="n">height</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bounds</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">ds</span><span class="o">.</span><span class="n">bounds</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">in_memory</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cmap</span> <span class="o">=</span> <span class="s2">&quot;viridis&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">norm</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">categorical</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ds</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_arith</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">function</span><span class="p">,</span> <span class="n">other</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;General method for performing arithmetic operations on</span>
<span class="sd">        RasterLayer objects</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        function : function</span>
<span class="sd">            Custom function that takes either one or two arrays, and</span>
<span class="sd">            returns a single array following a pre-defined calculation.</span>

<span class="sd">        other : pyspatialml.RasterLayer (optional, default None)</span>
<span class="sd">            If not specified, then a `function` should be provided that</span>
<span class="sd">            performs a calculation using only the selected RasterLayer.</span>
<span class="sd">            If `other` is specified, then a `function` should be</span>
<span class="sd">            supplied that takes to ndarrays as arguments and performs a</span>
<span class="sd">            calculation using both layers, i.e. layer1 - layer2.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pyspatialml.RasterLayer</span>
<span class="sd">            Returns a single RasterLayer containing the calculated</span>
<span class="sd">            result.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">driver</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">driver</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">RasterLayer</span><span class="p">):</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">function</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">masked</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">other</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">masked</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">function</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">masked</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>

        <span class="n">nodata</span> <span class="o">=</span> <span class="n">get_nodata_value</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span>

        <span class="c1"># open output file with updated metadata</span>
        <span class="n">meta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">meta</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">driver</span><span class="o">=</span><span class="n">driver</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">result</span><span class="o">.</span><span class="n">dtype</span><span class="p">,</span> <span class="n">nodata</span><span class="o">=</span><span class="n">nodata</span><span class="p">)</span>

        <span class="k">with</span> <span class="n">MemoryFile</span><span class="p">()</span> <span class="k">as</span> <span class="n">memfile</span><span class="p">:</span>
            <span class="n">dst</span> <span class="o">=</span> <span class="n">memfile</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="o">**</span><span class="n">meta</span><span class="p">)</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ma</span><span class="o">.</span><span class="n">filled</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">fill_value</span><span class="o">=</span><span class="n">nodata</span><span class="p">)</span>
            <span class="n">dst</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">indexes</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># create RasterLayer from result</span>
        <span class="n">layer</span> <span class="o">=</span> <span class="n">RasterLayer</span><span class="p">(</span><span class="n">rasterio</span><span class="o">.</span><span class="n">band</span><span class="p">(</span><span class="n">dst</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">layer</span>

    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Implements behaviour for addition of two RasterLayers,</span>
<span class="sd">        i.e. added_layer = layer1 + layer2</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">arr1</span><span class="p">,</span> <span class="n">arr2</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">arr1</span> <span class="o">+</span> <span class="n">arr2</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arith</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__sub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Implements behaviour for subtraction of two RasterLayers, i.e.</span>
<span class="sd">        subtracted_layer = layer1 - layer2</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">arr1</span><span class="p">,</span> <span class="n">arr2</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">arr1</span> <span class="o">-</span> <span class="n">arr2</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arith</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Implements behaviour for multiplication of two RasterLayers, i.e.</span>
<span class="sd">        product = layer1 * layer2</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">arr1</span><span class="p">,</span> <span class="n">arr2</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">arr1</span> <span class="o">*</span> <span class="n">arr2</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arith</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__truediv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Implements behaviour for division using `/` of two RasterLayers,</span>
<span class="sd">        i.e. div = layer1 / layer2</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">arr1</span><span class="p">,</span> <span class="n">arr2</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">arr1</span> <span class="o">/</span> <span class="n">arr2</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arith</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__and__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Implements &amp; operator</span>

<span class="sd">        Equivalent to a intersection operation of self</span>
<span class="sd">        with other, i.e. intersected = layer1 &amp; layer2.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">arr1</span><span class="p">,</span> <span class="n">arr2</span><span class="p">):</span>
            <span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">logical_and</span><span class="p">(</span><span class="n">arr1</span><span class="p">,</span> <span class="n">arr2</span><span class="p">)</span><span class="o">.</span><span class="n">mask</span>
            <span class="n">arr1</span><span class="o">.</span><span class="n">mask</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">return</span> <span class="n">arr1</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arith</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__or__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Implements | operator</span>

<span class="sd">        Fills gaps in self with pixels from other. Equivalent to a union</span>
<span class="sd">        operation, i.e. union = layer1 | layer2.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">arr1</span><span class="p">,</span> <span class="n">arr2</span><span class="p">):</span>
            <span class="n">idx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">logical_or</span><span class="p">(</span><span class="n">arr1</span><span class="p">,</span> <span class="n">arr2</span><span class="o">.</span><span class="n">mask</span><span class="p">)</span><span class="o">.</span><span class="n">mask</span>
            <span class="n">arr1</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">arr2</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">arr1</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arith</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__xor__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Exclusive OR using ^</span>

<span class="sd">        Equivalent to a symmetrical difference where the result comprises</span>
<span class="sd">        pixels that occur in self or other, but not both, i.e.</span>
<span class="sd">        xor = layer1 ^ layer2.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">arr1</span><span class="p">,</span> <span class="n">arr2</span><span class="p">):</span>
            <span class="n">mask</span> <span class="o">=</span> <span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">logical_xor</span><span class="p">(</span><span class="n">arr1</span><span class="p">,</span> <span class="n">arr2</span><span class="p">)</span>
            <span class="n">idx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">logical_or</span><span class="p">(</span><span class="n">arr1</span><span class="p">,</span> <span class="n">arr2</span><span class="o">.</span><span class="n">mask</span><span class="p">)</span><span class="o">.</span><span class="n">mask</span>
            <span class="n">arr1</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">arr2</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span>
            <span class="n">arr1</span><span class="o">.</span><span class="n">mask</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">nonzero</span><span class="p">(</span><span class="n">mask</span><span class="p">)]</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">return</span> <span class="n">arr1</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arith</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__round__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ndigits</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Behaviour for round() function, i.e. round(layer)&quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">ndigits</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">ndigits</span><span class="p">)</span>

        <span class="n">func</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">ndigits</span><span class="o">=</span><span class="n">ndigits</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arith</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__floor__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Rounding down to the nearest integer using math.floor(),</span>
<span class="sd">        i.e. math.floor(layer)&quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">arr</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arith</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__ceil__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Rounding up to the nearest integer using math.ceil(), i.e.</span>
<span class="sd">        math.ceil(layer)&quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">arr</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arith</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__trunc__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Truncating to an integral using math.trunc(), i.e.</span>
<span class="sd">        math.trunc(layer)&quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">arr</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">trunc</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arith</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__abs__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;abs() function as applied to a RasterLayer, i.e. abs(layer)&quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">arr</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arith</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__pos__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Unary positive, i.e. +layer1&quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">arr</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">positive</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arith</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__neg__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Unary negative, i.e. -layer1</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">arr</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">negative</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arith</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">max_pixels</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Take a sample of pixels from which to derive per-band</span>
<span class="sd">        statistics.&quot;&quot;&quot;</span>

        <span class="n">rel_width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="n">max_pixels</span>

        <span class="k">if</span> <span class="n">rel_width</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">col_scaling</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">max_pixels</span> <span class="o">/</span> <span class="n">rel_width</span><span class="p">)</span>
            <span class="n">row_scaling</span> <span class="o">=</span> <span class="n">max_pixels</span> <span class="o">-</span> <span class="n">col_scaling</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">col_scaling</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">max_pixels</span> <span class="o">*</span> <span class="n">rel_width</span><span class="p">)</span>
            <span class="n">row_scaling</span> <span class="o">=</span> <span class="n">max_pixels</span> <span class="o">-</span> <span class="n">col_scaling</span>

        <span class="n">out_shape</span> <span class="o">=</span> <span class="p">(</span><span class="n">row_scaling</span><span class="p">,</span> <span class="n">col_scaling</span><span class="p">)</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">masked</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">out_shape</span><span class="o">=</span><span class="n">out_shape</span><span class="p">)</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">arr</span>

    <span class="k">def</span> <span class="nf">min</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">max_pixels</span><span class="o">=</span><span class="mi">10000</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Minimum value.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        max_pixels : int</span>
<span class="sd">            Number of pixels used to inform statistical estimate.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numpy.float32</span>
<span class="sd">            The minimum value of the object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stats</span><span class="p">(</span><span class="n">max_pixels</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmin</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">max</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">max_pixels</span><span class="o">=</span><span class="mi">10000</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Maximum value.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        max_pixels : int</span>
<span class="sd">            Number of pixels used to inform statistical estimate.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numpy.float32</span>
<span class="sd">            The maximum value of the object&#39;s pixels.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stats</span><span class="p">(</span><span class="n">max_pixels</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmax</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">mean</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">max_pixels</span><span class="o">=</span><span class="mi">10000</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Mean value</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        max_pixels : int</span>
<span class="sd">            Number of pixels used to inform statistical estimate.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numpy.float32</span>
<span class="sd">            The mean value of the object&#39;s pixels.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stats</span><span class="p">(</span><span class="n">max_pixels</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmean</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">median</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">max_pixels</span><span class="o">=</span><span class="mi">10000</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Median value</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        max_pixels : int</span>
<span class="sd">            Number of pixels used to inform statistical estimate.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numpy.float32</span>
<span class="sd">            The medium value of the object&#39;s pixels.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stats</span><span class="p">(</span><span class="n">max_pixels</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmedian</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">stddev</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">max_pixels</span><span class="o">=</span><span class="mi">10000</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Standard deviation</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        max_pixels : int</span>
<span class="sd">            Number of pixels used to inform statistical estimate.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        numpy.float32</span>
<span class="sd">            The standard deviation of the object&#39;s pixels.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stats</span><span class="p">(</span><span class="n">max_pixels</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">nanstd</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Read method for a single RasterLayer.</span>

<span class="sd">        Reads the pixel values from a RasterLayer into a ndarray that</span>
<span class="sd">        always will have two dimensions in the order of (rows, columns).</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        **kwargs : named arguments that can be passed to the the</span>
<span class="sd">        rasterio.DatasetReader.read method.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;resampling&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">resampling_methods</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">enums</span><span class="o">.</span><span class="n">Resampling</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;resampling&quot;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">resampling_methods</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;Invalid resampling method. Resampling &quot;</span>
                    <span class="s2">&quot;method must be one of </span><span class="si">{0}</span><span class="s2">:&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">resampling_methods</span><span class="p">)</span>
                <span class="p">)</span>

            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;resampling&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">enums</span><span class="o">.</span><span class="n">Resampling</span><span class="p">[</span><span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;resampling&quot;</span><span class="p">]]</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ds</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">indexes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">bidx</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">driver</span><span class="o">=</span><span class="s2">&quot;GTiff&quot;</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">nodata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Write method for a single RasterLayer.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        file_path : str (opt)</span>
<span class="sd">            File path to save the dataset.</span>

<span class="sd">        driver : str</span>
<span class="sd">            GDAL-compatible driver used for the file format.</span>

<span class="sd">        dtype : str (opt)</span>
<span class="sd">            Numpy dtype used for the file. If omitted then the</span>
<span class="sd">            RasterLayer&#39;s dtype is used.</span>

<span class="sd">        nodata : any number (opt)</span>
<span class="sd">            A value used to represent the nodata pixels. If omitted</span>
<span class="sd">            then the RasterLayer&#39;s nodata value is used (if assigned</span>
<span class="sd">            already).</span>

<span class="sd">        kwargs : opt</span>
<span class="sd">            Optional named arguments to pass to the format drivers.</span>
<span class="sd">            For example can be `compress=&quot;deflate&quot;` to add compression.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pyspatialml.RasterLayer</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">dtype</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">dtype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dtype</span>

        <span class="k">if</span> <span class="n">nodata</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">nodata</span> <span class="o">=</span> <span class="n">get_nodata_value</span><span class="p">(</span><span class="n">dtype</span><span class="p">)</span>

        <span class="n">meta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ds</span><span class="o">.</span><span class="n">meta</span>
        <span class="n">meta</span><span class="p">[</span><span class="s2">&quot;driver&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">driver</span>
        <span class="n">meta</span><span class="p">[</span><span class="s2">&quot;nodata&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nodata</span>
        <span class="n">meta</span><span class="p">[</span><span class="s2">&quot;dtype&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dtype</span>
        <span class="n">meta</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="c1"># mask any nodata values</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ma</span><span class="o">.</span><span class="n">masked_equal</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodata</span><span class="p">)</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">filled</span><span class="p">(</span><span class="n">fill_value</span><span class="o">=</span><span class="n">nodata</span><span class="p">)</span>

        <span class="c1"># write to file</span>
        <span class="k">with</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">meta</span><span class="p">)</span> <span class="k">as</span> <span class="n">dst</span><span class="p">:</span>
            <span class="n">dst</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">arr</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">dtype</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>

        <span class="n">src</span> <span class="o">=</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
        <span class="n">band</span> <span class="o">=</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">band</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">layer</span> <span class="o">=</span> <span class="n">RasterLayer</span><span class="p">(</span><span class="n">band</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">layer</span>

    <span class="k">def</span> <span class="nf">_extract_by_indices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rows</span><span class="p">,</span> <span class="n">cols</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Spatial query of Raster object (by-band)&quot;&quot;&quot;</span>

        <span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ma</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">rows</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">count</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">&quot;float32&quot;</span><span class="p">)</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">masked</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">X</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="n">rows</span><span class="p">,</span> <span class="n">cols</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">X</span>

    <span class="k">def</span> <span class="nf">plot</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">cmap</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">norm</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">ax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">cax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">figsize</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">out_shape</span><span class="o">=</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span> <span class="mi">500</span><span class="p">),</span>
        <span class="n">categorical</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">legend</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">vmin</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">vmax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">fig_kwds</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">legend_kwds</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Plot a RasterLayer using matplotlib.pyplot.imshow</span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        cmap : str (default None)</span>
<span class="sd">            The name of a colormap recognized by matplotlib.</span>
<span class="sd">            Overrides the cmap attribute of the RasterLayer.</span>

<span class="sd">        norm : matplotlib.colors.Normalize (opt)</span>
<span class="sd">            A matplotlib.colors.Normalize to apply to the RasterLayer.</span>
<span class="sd">            This overrides the norm attribute of the RasterLayer.</span>

<span class="sd">        ax : matplotlib.pyplot.Artist (optional, default None)</span>
<span class="sd">            axes instance on which to draw to plot.</span>

<span class="sd">        cax : matplotlib.pyplot.Artist (optional, default None)</span>
<span class="sd">            axes on which to draw the legend.</span>

<span class="sd">        figsize : tuple of integers (optional, default None)</span>
<span class="sd">            Size of the matplotlib.figure.Figure. If the ax argument is</span>
<span class="sd">            given explicitly, figsize is ignored.</span>

<span class="sd">        out_shape : tuple, default=(500, 500)</span>
<span class="sd">            Number of rows, cols to read from the raster datasets for</span>
<span class="sd">            plotting.</span>

<span class="sd">        categorical : bool (optional, default False)</span>
<span class="sd">            if True then the raster values will be considered to</span>
<span class="sd">            represent discrete values, otherwise they are considered to</span>
<span class="sd">            represent continuous values. This overrides the</span>
<span class="sd">            RasterLayer &#39;categorical&#39; attribute. Setting the argument</span>
<span class="sd">            categorical to True is ignored if the</span>
<span class="sd">            RasterLayer.categorical is already True.</span>

<span class="sd">        legend : bool (optional, default False)</span>
<span class="sd">            Whether to plot the legend.</span>

<span class="sd">        vmin, xmax : scale (optional, default None)</span>
<span class="sd">            vmin and vmax define the data range that the colormap</span>
<span class="sd">            covers. By default, the colormap covers the complete value</span>
<span class="sd">            range of the supplied data. vmin, vmax are ignored if the</span>
<span class="sd">            norm parameter is used.</span>

<span class="sd">        fig_kwds : dict (optional, default None)</span>
<span class="sd">            Additional arguments to pass to the</span>
<span class="sd">            matplotlib.pyplot.figure call when creating the figure</span>
<span class="sd">            object. Ignored if ax is passed to the plot function.</span>

<span class="sd">        legend_kwds : dict (optional, default None)</span>
<span class="sd">            Keyword arguments to pass to matplotlib.pyplot.colorbar().</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        ax : matplotlib axes instance</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># some checks</span>
        <span class="k">if</span> <span class="n">fig_kwds</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">fig_kwds</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">if</span> <span class="n">ax</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">cax</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;ax&#39; can not be None if &#39;cax&#39; is not.&quot;</span><span class="p">)</span>
            <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">,</span> <span class="o">**</span><span class="n">fig_kwds</span><span class="p">)</span>

        <span class="n">ax</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="s2">&quot;equal&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">norm</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">norm</span><span class="p">,</span> <span class="n">mpl</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">Normalize</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span>
                    <span class="s2">&quot;norm argument should be a &quot;</span> <span class="s2">&quot;matplotlib.colors.Normalize object&quot;</span>
                <span class="p">)</span>

        <span class="k">if</span> <span class="n">cmap</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">cmap</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cmap</span>

        <span class="k">if</span> <span class="n">norm</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">norm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">norm</span>

        <span class="k">if</span> <span class="n">legend_kwds</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">legend_kwds</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">masked</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">out_shape</span><span class="o">=</span><span class="n">out_shape</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">categorical</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">categorical</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
                <span class="n">N</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">bincount</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
                <span class="n">cmap</span> <span class="o">=</span> <span class="n">discrete_cmap</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">base_cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">)</span>
            <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

        <span class="n">im</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span>
            <span class="n">X</span><span class="o">=</span><span class="n">arr</span><span class="p">,</span>
            <span class="n">extent</span><span class="o">=</span><span class="n">rasterio</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">plotting_extent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ds</span><span class="p">),</span>
            <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span>
            <span class="n">norm</span><span class="o">=</span><span class="n">norm</span><span class="p">,</span>
            <span class="n">vmin</span><span class="o">=</span><span class="n">vmin</span><span class="p">,</span>
            <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">legend</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">im</span><span class="p">,</span> <span class="n">cax</span><span class="o">=</span><span class="n">cax</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="o">**</span><span class="n">legend_kwds</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">ax</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="pyspatialml.rasterlayer.RasterLayer.__abs__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__abs__</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>abs() function as applied to a RasterLayer, i.e. abs(layer)</p>

      <details class="quote">
        <summary>Source code in <code>pyspatialml/rasterlayer.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__abs__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;abs() function as applied to a RasterLayer, i.e. abs(layer)&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">arr</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arith</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.rasterlayer.RasterLayer.__add__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__add__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Implements behaviour for addition of two RasterLayers,
i.e. added_layer = layer1 + layer2</p>

      <details class="quote">
        <summary>Source code in <code>pyspatialml/rasterlayer.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Implements behaviour for addition of two RasterLayers,</span>
<span class="sd">    i.e. added_layer = layer1 + layer2</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">arr1</span><span class="p">,</span> <span class="n">arr2</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">arr1</span> <span class="o">+</span> <span class="n">arr2</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arith</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.rasterlayer.RasterLayer.__and__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__and__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Implements &amp; operator</p>
<p>Equivalent to a intersection operation of self
with other, i.e. intersected = layer1 &amp; layer2.</p>

      <details class="quote">
        <summary>Source code in <code>pyspatialml/rasterlayer.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__and__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Implements &amp; operator</span>

<span class="sd">    Equivalent to a intersection operation of self</span>
<span class="sd">    with other, i.e. intersected = layer1 &amp; layer2.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">arr1</span><span class="p">,</span> <span class="n">arr2</span><span class="p">):</span>
        <span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">logical_and</span><span class="p">(</span><span class="n">arr1</span><span class="p">,</span> <span class="n">arr2</span><span class="p">)</span><span class="o">.</span><span class="n">mask</span>
        <span class="n">arr1</span><span class="o">.</span><span class="n">mask</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">arr1</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arith</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.rasterlayer.RasterLayer.__ceil__" class="doc doc-heading">
<code class="highlight language-python"><span class="n">__ceil__</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Rounding up to the nearest integer using math.ceil(), i.e.
math.ceil(layer)</p>

      <details class="quote">
        <summary>Source code in <code>pyspatialml/rasterlayer.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">__ceil__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Rounding up to the nearest integer using math.ceil(), i.e.</span>
<span class="sd">    math.ceil(layer)&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">arr</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arith</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.rasterlayer.RasterLayer.__floor__" class="doc doc-heading">
<code class="highlight language-python"><span class="n">__floor__</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Rounding down to the nearest integer using math.floor(),
i.e. math.floor(layer)</p>

      <details class="quote">
        <summary>Source code in <code>pyspatialml/rasterlayer.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">__floor__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Rounding down to the nearest integer using math.floor(),</span>
<span class="sd">    i.e. math.floor(layer)&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">arr</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arith</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.rasterlayer.RasterLayer.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">band</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Initiate a RasterLayer object</p>
<h5 id="pyspatialml.rasterlayer.RasterLayer.__init__--parameters">Parameters</h5>
<p>band : a rasterio.Band object</p>

      <details class="quote">
        <summary>Source code in <code>pyspatialml/rasterlayer.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">band</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Initiate a RasterLayer object</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    band : a rasterio.Band object</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">bidx</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">bidx</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">dtype</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">dtype</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ds</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">ds</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">band</span><span class="o">.</span><span class="n">ds</span><span class="o">.</span><span class="n">files</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">_make_name</span><span class="p">(</span><span class="n">band</span><span class="o">.</span><span class="n">ds</span><span class="o">.</span><span class="n">files</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">ds</span><span class="o">.</span><span class="n">files</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;in_memory&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">nodata</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">ds</span><span class="o">.</span><span class="n">nodata</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">driver</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">ds</span><span class="o">.</span><span class="n">meta</span><span class="p">[</span><span class="s2">&quot;driver&quot;</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">meta</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">ds</span><span class="o">.</span><span class="n">meta</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">transform</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">ds</span><span class="o">.</span><span class="n">transform</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">crs</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">ds</span><span class="o">.</span><span class="n">crs</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">shape</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">ds</span><span class="o">.</span><span class="n">width</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">ds</span><span class="o">.</span><span class="n">height</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">bounds</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">ds</span><span class="o">.</span><span class="n">bounds</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">in_memory</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">cmap</span> <span class="o">=</span> <span class="s2">&quot;viridis&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">norm</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">categorical</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.rasterlayer.RasterLayer.__mul__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__mul__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Implements behaviour for multiplication of two RasterLayers, i.e.
product = layer1 * layer2</p>

      <details class="quote">
        <summary>Source code in <code>pyspatialml/rasterlayer.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Implements behaviour for multiplication of two RasterLayers, i.e.</span>
<span class="sd">    product = layer1 * layer2</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">arr1</span><span class="p">,</span> <span class="n">arr2</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">arr1</span> <span class="o">*</span> <span class="n">arr2</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arith</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.rasterlayer.RasterLayer.__neg__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__neg__</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Unary negative, i.e. -layer1</p>

      <details class="quote">
        <summary>Source code in <code>pyspatialml/rasterlayer.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__neg__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Unary negative, i.e. -layer1</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">arr</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">negative</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arith</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.rasterlayer.RasterLayer.__or__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__or__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Implements | operator</p>
<p>Fills gaps in self with pixels from other. Equivalent to a union
operation, i.e. union = layer1 | layer2.</p>

      <details class="quote">
        <summary>Source code in <code>pyspatialml/rasterlayer.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__or__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Implements | operator</span>

<span class="sd">    Fills gaps in self with pixels from other. Equivalent to a union</span>
<span class="sd">    operation, i.e. union = layer1 | layer2.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">arr1</span><span class="p">,</span> <span class="n">arr2</span><span class="p">):</span>
        <span class="n">idx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">logical_or</span><span class="p">(</span><span class="n">arr1</span><span class="p">,</span> <span class="n">arr2</span><span class="o">.</span><span class="n">mask</span><span class="p">)</span><span class="o">.</span><span class="n">mask</span>
        <span class="n">arr1</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">arr2</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">arr1</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arith</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.rasterlayer.RasterLayer.__pos__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__pos__</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Unary positive, i.e. +layer1</p>

      <details class="quote">
        <summary>Source code in <code>pyspatialml/rasterlayer.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__pos__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Unary positive, i.e. +layer1&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">arr</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">positive</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arith</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.rasterlayer.RasterLayer.__round__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__round__</span><span class="p">(</span><span class="n">ndigits</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Behaviour for round() function, i.e. round(layer)</p>

      <details class="quote">
        <summary>Source code in <code>pyspatialml/rasterlayer.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__round__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ndigits</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Behaviour for round() function, i.e. round(layer)&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">ndigits</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">ndigits</span><span class="p">)</span>

    <span class="n">func</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">ndigits</span><span class="o">=</span><span class="n">ndigits</span><span class="p">)</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arith</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.rasterlayer.RasterLayer.__sub__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__sub__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Implements behaviour for subtraction of two RasterLayers, i.e.
subtracted_layer = layer1 - layer2</p>

      <details class="quote">
        <summary>Source code in <code>pyspatialml/rasterlayer.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__sub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Implements behaviour for subtraction of two RasterLayers, i.e.</span>
<span class="sd">    subtracted_layer = layer1 - layer2</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">arr1</span><span class="p">,</span> <span class="n">arr2</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">arr1</span> <span class="o">-</span> <span class="n">arr2</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arith</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.rasterlayer.RasterLayer.__truediv__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__truediv__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Implements behaviour for division using <code>/</code> of two RasterLayers,
i.e. div = layer1 / layer2</p>

      <details class="quote">
        <summary>Source code in <code>pyspatialml/rasterlayer.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__truediv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Implements behaviour for division using `/` of two RasterLayers,</span>
<span class="sd">    i.e. div = layer1 / layer2</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">arr1</span><span class="p">,</span> <span class="n">arr2</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">arr1</span> <span class="o">/</span> <span class="n">arr2</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arith</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.rasterlayer.RasterLayer.__trunc__" class="doc doc-heading">
<code class="highlight language-python"><span class="n">__trunc__</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Truncating to an integral using math.trunc(), i.e.
math.trunc(layer)</p>

      <details class="quote">
        <summary>Source code in <code>pyspatialml/rasterlayer.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">__trunc__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Truncating to an integral using math.trunc(), i.e.</span>
<span class="sd">    math.trunc(layer)&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">arr</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">trunc</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arith</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.rasterlayer.RasterLayer.__xor__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__xor__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Exclusive OR using ^</p>
<p>Equivalent to a symmetrical difference where the result comprises
pixels that occur in self or other, but not both, i.e.
xor = layer1 ^ layer2.</p>

      <details class="quote">
        <summary>Source code in <code>pyspatialml/rasterlayer.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__xor__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Exclusive OR using ^</span>

<span class="sd">    Equivalent to a symmetrical difference where the result comprises</span>
<span class="sd">    pixels that occur in self or other, but not both, i.e.</span>
<span class="sd">    xor = layer1 ^ layer2.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">arr1</span><span class="p">,</span> <span class="n">arr2</span><span class="p">):</span>
        <span class="n">mask</span> <span class="o">=</span> <span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">logical_xor</span><span class="p">(</span><span class="n">arr1</span><span class="p">,</span> <span class="n">arr2</span><span class="p">)</span>
        <span class="n">idx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">logical_or</span><span class="p">(</span><span class="n">arr1</span><span class="p">,</span> <span class="n">arr2</span><span class="o">.</span><span class="n">mask</span><span class="p">)</span><span class="o">.</span><span class="n">mask</span>
        <span class="n">arr1</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">arr2</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span>
        <span class="n">arr1</span><span class="o">.</span><span class="n">mask</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">nonzero</span><span class="p">(</span><span class="n">mask</span><span class="p">)]</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">arr1</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arith</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.rasterlayer.RasterLayer.max" class="doc doc-heading">
<code class="highlight language-python"><span class="nb">max</span><span class="p">(</span><span class="n">max_pixels</span><span class="o">=</span><span class="mi">10000</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Maximum value.</p>
<h5 id="pyspatialml.rasterlayer.RasterLayer.max--parameters">Parameters</h5>

<details class="max_pixels-">
  <summary>int</summary>
  <p>Number of pixels used to inform statistical estimate.</p>
</details>      <h5 id="pyspatialml.rasterlayer.RasterLayer.max--returns">Returns</h5>
<p>numpy.float32
    The maximum value of the object's pixels.</p>

      <details class="quote">
        <summary>Source code in <code>pyspatialml/rasterlayer.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">max</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">max_pixels</span><span class="o">=</span><span class="mi">10000</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Maximum value.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    max_pixels : int</span>
<span class="sd">        Number of pixels used to inform statistical estimate.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    numpy.float32</span>
<span class="sd">        The maximum value of the object&#39;s pixels.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stats</span><span class="p">(</span><span class="n">max_pixels</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmax</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.rasterlayer.RasterLayer.mean" class="doc doc-heading">
<code class="highlight language-python"><span class="n">mean</span><span class="p">(</span><span class="n">max_pixels</span><span class="o">=</span><span class="mi">10000</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Mean value</p>
<h5 id="pyspatialml.rasterlayer.RasterLayer.mean--parameters">Parameters</h5>

<details class="max_pixels-">
  <summary>int</summary>
  <p>Number of pixels used to inform statistical estimate.</p>
</details>      <h5 id="pyspatialml.rasterlayer.RasterLayer.mean--returns">Returns</h5>
<p>numpy.float32
    The mean value of the object's pixels.</p>

      <details class="quote">
        <summary>Source code in <code>pyspatialml/rasterlayer.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">mean</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">max_pixels</span><span class="o">=</span><span class="mi">10000</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Mean value</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    max_pixels : int</span>
<span class="sd">        Number of pixels used to inform statistical estimate.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    numpy.float32</span>
<span class="sd">        The mean value of the object&#39;s pixels.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stats</span><span class="p">(</span><span class="n">max_pixels</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmean</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.rasterlayer.RasterLayer.median" class="doc doc-heading">
<code class="highlight language-python"><span class="n">median</span><span class="p">(</span><span class="n">max_pixels</span><span class="o">=</span><span class="mi">10000</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Median value</p>
<h5 id="pyspatialml.rasterlayer.RasterLayer.median--parameters">Parameters</h5>

<details class="max_pixels-">
  <summary>int</summary>
  <p>Number of pixels used to inform statistical estimate.</p>
</details>      <h5 id="pyspatialml.rasterlayer.RasterLayer.median--returns">Returns</h5>
<p>numpy.float32
    The medium value of the object's pixels.</p>

      <details class="quote">
        <summary>Source code in <code>pyspatialml/rasterlayer.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">median</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">max_pixels</span><span class="o">=</span><span class="mi">10000</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Median value</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    max_pixels : int</span>
<span class="sd">        Number of pixels used to inform statistical estimate.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    numpy.float32</span>
<span class="sd">        The medium value of the object&#39;s pixels.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stats</span><span class="p">(</span><span class="n">max_pixels</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmedian</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.rasterlayer.RasterLayer.min" class="doc doc-heading">
<code class="highlight language-python"><span class="nb">min</span><span class="p">(</span><span class="n">max_pixels</span><span class="o">=</span><span class="mi">10000</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Minimum value.</p>
<h5 id="pyspatialml.rasterlayer.RasterLayer.min--parameters">Parameters</h5>

<details class="max_pixels-">
  <summary>int</summary>
  <p>Number of pixels used to inform statistical estimate.</p>
</details>      <h5 id="pyspatialml.rasterlayer.RasterLayer.min--returns">Returns</h5>
<p>numpy.float32
    The minimum value of the object</p>

      <details class="quote">
        <summary>Source code in <code>pyspatialml/rasterlayer.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">min</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">max_pixels</span><span class="o">=</span><span class="mi">10000</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Minimum value.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    max_pixels : int</span>
<span class="sd">        Number of pixels used to inform statistical estimate.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    numpy.float32</span>
<span class="sd">        The minimum value of the object</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stats</span><span class="p">(</span><span class="n">max_pixels</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmin</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.rasterlayer.RasterLayer.plot" class="doc doc-heading">
<code class="highlight language-python"><span class="n">plot</span><span class="p">(</span><span class="n">cmap</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">norm</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">out_shape</span><span class="o">=</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span> <span class="mi">500</span><span class="p">),</span> <span class="n">categorical</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fig_kwds</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">legend_kwds</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Plot a RasterLayer using matplotlib.pyplot.imshow
Parameters</p>
<hr />

<details class="cmap-">
  <summary>str (default None)</summary>
  <p>The name of a colormap recognized by matplotlib.
Overrides the cmap attribute of the RasterLayer.</p>
</details>
<details class="norm-">
  <summary>matplotlib.colors.Normalize (opt)</summary>
  <p>A matplotlib.colors.Normalize to apply to the RasterLayer.
This overrides the norm attribute of the RasterLayer.</p>
</details>
<details class="ax-">
  <summary>matplotlib.pyplot.Artist (optional, default None)</summary>
  <p>axes instance on which to draw to plot.</p>
</details>
<details class="cax-">
  <summary>matplotlib.pyplot.Artist (optional, default None)</summary>
  <p>axes on which to draw the legend.</p>
</details>
<details class="figsize-">
  <summary>tuple of integers (optional, default None)</summary>
  <p>Size of the matplotlib.figure.Figure. If the ax argument is
given explicitly, figsize is ignored.</p>
</details>
<details class="out_shape-">
  <summary>tuple, default=(500, 500)</summary>
  <p>Number of rows, cols to read from the raster datasets for
plotting.</p>
</details>
<details class="categorical-">
  <summary>bool (optional, default False)</summary>
  <p>if True then the raster values will be considered to
represent discrete values, otherwise they are considered to
represent continuous values. This overrides the
RasterLayer 'categorical' attribute. Setting the argument
categorical to True is ignored if the
RasterLayer.categorical is already True.</p>
</details>
<details class="legend-">
  <summary>bool (optional, default False)</summary>
  <p>Whether to plot the legend.</p>
</details>      <p>vmin, xmax : scale (optional, default None)
    vmin and vmax define the data range that the colormap
    covers. By default, the colormap covers the complete value
    range of the supplied data. vmin, vmax are ignored if the
    norm parameter is used.</p>

<details class="fig_kwds-">
  <summary>dict (optional, default None)</summary>
  <p>Additional arguments to pass to the
matplotlib.pyplot.figure call when creating the figure
object. Ignored if ax is passed to the plot function.</p>
</details>
<details class="legend_kwds-">
  <summary>dict (optional, default None)</summary>
  <p>Keyword arguments to pass to matplotlib.pyplot.colorbar().</p>
</details>      <h5 id="pyspatialml.rasterlayer.RasterLayer.plot--returns">Returns</h5>
<p>ax : matplotlib axes instance</p>

      <details class="quote">
        <summary>Source code in <code>pyspatialml/rasterlayer.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">plot</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">cmap</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">norm</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">ax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">cax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">figsize</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">out_shape</span><span class="o">=</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span> <span class="mi">500</span><span class="p">),</span>
    <span class="n">categorical</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">legend</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">vmin</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">vmax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">fig_kwds</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">legend_kwds</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Plot a RasterLayer using matplotlib.pyplot.imshow</span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    cmap : str (default None)</span>
<span class="sd">        The name of a colormap recognized by matplotlib.</span>
<span class="sd">        Overrides the cmap attribute of the RasterLayer.</span>

<span class="sd">    norm : matplotlib.colors.Normalize (opt)</span>
<span class="sd">        A matplotlib.colors.Normalize to apply to the RasterLayer.</span>
<span class="sd">        This overrides the norm attribute of the RasterLayer.</span>

<span class="sd">    ax : matplotlib.pyplot.Artist (optional, default None)</span>
<span class="sd">        axes instance on which to draw to plot.</span>

<span class="sd">    cax : matplotlib.pyplot.Artist (optional, default None)</span>
<span class="sd">        axes on which to draw the legend.</span>

<span class="sd">    figsize : tuple of integers (optional, default None)</span>
<span class="sd">        Size of the matplotlib.figure.Figure. If the ax argument is</span>
<span class="sd">        given explicitly, figsize is ignored.</span>

<span class="sd">    out_shape : tuple, default=(500, 500)</span>
<span class="sd">        Number of rows, cols to read from the raster datasets for</span>
<span class="sd">        plotting.</span>

<span class="sd">    categorical : bool (optional, default False)</span>
<span class="sd">        if True then the raster values will be considered to</span>
<span class="sd">        represent discrete values, otherwise they are considered to</span>
<span class="sd">        represent continuous values. This overrides the</span>
<span class="sd">        RasterLayer &#39;categorical&#39; attribute. Setting the argument</span>
<span class="sd">        categorical to True is ignored if the</span>
<span class="sd">        RasterLayer.categorical is already True.</span>

<span class="sd">    legend : bool (optional, default False)</span>
<span class="sd">        Whether to plot the legend.</span>

<span class="sd">    vmin, xmax : scale (optional, default None)</span>
<span class="sd">        vmin and vmax define the data range that the colormap</span>
<span class="sd">        covers. By default, the colormap covers the complete value</span>
<span class="sd">        range of the supplied data. vmin, vmax are ignored if the</span>
<span class="sd">        norm parameter is used.</span>

<span class="sd">    fig_kwds : dict (optional, default None)</span>
<span class="sd">        Additional arguments to pass to the</span>
<span class="sd">        matplotlib.pyplot.figure call when creating the figure</span>
<span class="sd">        object. Ignored if ax is passed to the plot function.</span>

<span class="sd">    legend_kwds : dict (optional, default None)</span>
<span class="sd">        Keyword arguments to pass to matplotlib.pyplot.colorbar().</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    ax : matplotlib axes instance</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># some checks</span>
    <span class="k">if</span> <span class="n">fig_kwds</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">fig_kwds</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">if</span> <span class="n">ax</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">cax</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;ax&#39; can not be None if &#39;cax&#39; is not.&quot;</span><span class="p">)</span>
        <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">,</span> <span class="o">**</span><span class="n">fig_kwds</span><span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="s2">&quot;equal&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">norm</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">norm</span><span class="p">,</span> <span class="n">mpl</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">Normalize</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span>
                <span class="s2">&quot;norm argument should be a &quot;</span> <span class="s2">&quot;matplotlib.colors.Normalize object&quot;</span>
            <span class="p">)</span>

    <span class="k">if</span> <span class="n">cmap</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">cmap</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cmap</span>

    <span class="k">if</span> <span class="n">norm</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">norm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">norm</span>

    <span class="k">if</span> <span class="n">legend_kwds</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">legend_kwds</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">masked</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">out_shape</span><span class="o">=</span><span class="n">out_shape</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">categorical</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">categorical</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="n">N</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">bincount</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
            <span class="n">cmap</span> <span class="o">=</span> <span class="n">discrete_cmap</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">base_cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">)</span>
        <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

    <span class="n">im</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span>
        <span class="n">X</span><span class="o">=</span><span class="n">arr</span><span class="p">,</span>
        <span class="n">extent</span><span class="o">=</span><span class="n">rasterio</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">plotting_extent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ds</span><span class="p">),</span>
        <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span>
        <span class="n">norm</span><span class="o">=</span><span class="n">norm</span><span class="p">,</span>
        <span class="n">vmin</span><span class="o">=</span><span class="n">vmin</span><span class="p">,</span>
        <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">legend</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">im</span><span class="p">,</span> <span class="n">cax</span><span class="o">=</span><span class="n">cax</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="o">**</span><span class="n">legend_kwds</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">ax</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.rasterlayer.RasterLayer.read" class="doc doc-heading">
<code class="highlight language-python"><span class="n">read</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Read method for a single RasterLayer.</p>
<p>Reads the pixel values from a RasterLayer into a ndarray that
always will have two dimensions in the order of (rows, columns).</p>
<h5 id="pyspatialml.rasterlayer.RasterLayer.read--parameters">Parameters</h5>
<p>**kwargs : named arguments that can be passed to the the
rasterio.DatasetReader.read method.</p>

      <details class="quote">
        <summary>Source code in <code>pyspatialml/rasterlayer.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Read method for a single RasterLayer.</span>

<span class="sd">    Reads the pixel values from a RasterLayer into a ndarray that</span>
<span class="sd">    always will have two dimensions in the order of (rows, columns).</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    **kwargs : named arguments that can be passed to the the</span>
<span class="sd">    rasterio.DatasetReader.read method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="s2">&quot;resampling&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">resampling_methods</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">enums</span><span class="o">.</span><span class="n">Resampling</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;resampling&quot;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">resampling_methods</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Invalid resampling method. Resampling &quot;</span>
                <span class="s2">&quot;method must be one of </span><span class="si">{0}</span><span class="s2">:&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">resampling_methods</span><span class="p">)</span>
            <span class="p">)</span>

        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;resampling&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">enums</span><span class="o">.</span><span class="n">Resampling</span><span class="p">[</span><span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;resampling&quot;</span><span class="p">]]</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ds</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">indexes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">bidx</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.rasterlayer.RasterLayer.stddev" class="doc doc-heading">
<code class="highlight language-python"><span class="n">stddev</span><span class="p">(</span><span class="n">max_pixels</span><span class="o">=</span><span class="mi">10000</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Standard deviation</p>
<h5 id="pyspatialml.rasterlayer.RasterLayer.stddev--parameters">Parameters</h5>

<details class="max_pixels-">
  <summary>int</summary>
  <p>Number of pixels used to inform statistical estimate.</p>
</details>      <h5 id="pyspatialml.rasterlayer.RasterLayer.stddev--returns">Returns</h5>
<p>numpy.float32
    The standard deviation of the object's pixels.</p>

      <details class="quote">
        <summary>Source code in <code>pyspatialml/rasterlayer.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">stddev</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">max_pixels</span><span class="o">=</span><span class="mi">10000</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Standard deviation</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    max_pixels : int</span>
<span class="sd">        Number of pixels used to inform statistical estimate.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    numpy.float32</span>
<span class="sd">        The standard deviation of the object&#39;s pixels.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stats</span><span class="p">(</span><span class="n">max_pixels</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">nanstd</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.rasterlayer.RasterLayer.write" class="doc doc-heading">
<code class="highlight language-python"><span class="n">write</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">driver</span><span class="o">=</span><span class="s1">&#39;GTiff&#39;</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">nodata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Write method for a single RasterLayer.</p>
<h5 id="pyspatialml.rasterlayer.RasterLayer.write--parameters">Parameters</h5>

<details class="file_path-">
  <summary>str (opt)</summary>
  <p>File path to save the dataset.</p>
</details>
<details class="driver-">
  <summary>str</summary>
  <p>GDAL-compatible driver used for the file format.</p>
</details>
<details class="dtype-">
  <summary>str (opt)</summary>
  <p>Numpy dtype used for the file. If omitted then the
RasterLayer's dtype is used.</p>
</details>
<details class="nodata-">
  <summary>any number (opt)</summary>
  <p>A value used to represent the nodata pixels. If omitted
then the RasterLayer's nodata value is used (if assigned
already).</p>
</details>
<details class="kwargs-">
  <summary>opt</summary>
  <p>Optional named arguments to pass to the format drivers.
For example can be <code>compress="deflate"</code> to add compression.</p>
</details>      <h5 id="pyspatialml.rasterlayer.RasterLayer.write--returns">Returns</h5>
<p>pyspatialml.RasterLayer</p>

      <details class="quote">
        <summary>Source code in <code>pyspatialml/rasterlayer.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">driver</span><span class="o">=</span><span class="s2">&quot;GTiff&quot;</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">nodata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Write method for a single RasterLayer.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    file_path : str (opt)</span>
<span class="sd">        File path to save the dataset.</span>

<span class="sd">    driver : str</span>
<span class="sd">        GDAL-compatible driver used for the file format.</span>

<span class="sd">    dtype : str (opt)</span>
<span class="sd">        Numpy dtype used for the file. If omitted then the</span>
<span class="sd">        RasterLayer&#39;s dtype is used.</span>

<span class="sd">    nodata : any number (opt)</span>
<span class="sd">        A value used to represent the nodata pixels. If omitted</span>
<span class="sd">        then the RasterLayer&#39;s nodata value is used (if assigned</span>
<span class="sd">        already).</span>

<span class="sd">    kwargs : opt</span>
<span class="sd">        Optional named arguments to pass to the format drivers.</span>
<span class="sd">        For example can be `compress=&quot;deflate&quot;` to add compression.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pyspatialml.RasterLayer</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">dtype</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">dtype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dtype</span>

    <span class="k">if</span> <span class="n">nodata</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">nodata</span> <span class="o">=</span> <span class="n">get_nodata_value</span><span class="p">(</span><span class="n">dtype</span><span class="p">)</span>

    <span class="n">meta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ds</span><span class="o">.</span><span class="n">meta</span>
    <span class="n">meta</span><span class="p">[</span><span class="s2">&quot;driver&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">driver</span>
    <span class="n">meta</span><span class="p">[</span><span class="s2">&quot;nodata&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nodata</span>
    <span class="n">meta</span><span class="p">[</span><span class="s2">&quot;dtype&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dtype</span>
    <span class="n">meta</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="c1"># mask any nodata values</span>
    <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ma</span><span class="o">.</span><span class="n">masked_equal</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodata</span><span class="p">)</span>
    <span class="n">arr</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">filled</span><span class="p">(</span><span class="n">fill_value</span><span class="o">=</span><span class="n">nodata</span><span class="p">)</span>

    <span class="c1"># write to file</span>
    <span class="k">with</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">meta</span><span class="p">)</span> <span class="k">as</span> <span class="n">dst</span><span class="p">:</span>
        <span class="n">dst</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">arr</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">dtype</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>

    <span class="n">src</span> <span class="o">=</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
    <span class="n">band</span> <span class="o">=</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">band</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">layer</span> <span class="o">=</span> <span class="n">RasterLayer</span><span class="p">(</span><span class="n">band</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">layer</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>




  </div>

  </div>

</div>

<div class="doc doc-object doc-module">


<a id="pyspatialml.transformers"></a>
  <div class="doc doc-contents first">

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="pyspatialml.transformers.GeoDistTransformer" class="doc doc-heading">
        <code>GeoDistTransformer</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><span title="sklearn.base.BaseEstimator">BaseEstimator</span></code>, <code><span title="sklearn.base.TransformerMixin">TransformerMixin</span></code></p>

  
      <p>Transformer to add new features based on geographical distances
to reference locations.</p>
<h4 id="pyspatialml.transformers.GeoDistTransformer--parameters">Parameters</h4>

<details class="refs-">
  <summary>ndarray</summary>
  <p>Array of coordinates of reference locations in
(m, n-dimensional) order, such as {n_locations,
x_coordinates, y_coordinates, ...} for as many dimensions as
required. For example to calculate distances to a single x,y,z
location:</p>
<p>refs = [-57.345, -110.134, 1012]</p>
<p>And to calculate distances to three x,y reference locations:</p>
<p>refs = [
    [-57.345, -110.134],
    [-56.345, -109.123],
    [-58.534, -112.123]
]</p>
<p>The supplied array has to have at least x,y coordinates with a
(1, 2) shape for a single location.</p>
</details>
<details class="minimum-">
  <summary>bool, default is False</summary>
  <p>Optionally calculate the minimum distance to the combined
reference locations, resulting in a single new feature,
rather than a new feature for each individual reference
location.</p>
</details>
<details class="log-">
  <summary>bool (opt), default=False</summary>
  <p>Optionally log-transform the distance measures.</p>
</details>      <h4 id="pyspatialml.transformers.GeoDistTransformer--returns">Returns</h4>

<details class="x_new-">
  <summary>ndarray</summary>
  <p>Array of shape (n_samples, n_features) with new geodistance
features appended to the right-most columns of the array.</p>
</details>

        <details class="quote">
          <summary>Source code in <code>pyspatialml/transformers.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">GeoDistTransformer</span><span class="p">(</span><span class="n">BaseEstimator</span><span class="p">,</span> <span class="n">TransformerMixin</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Transformer to add new features based on geographical distances</span>
<span class="sd">    to reference locations.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    refs : ndarray</span>
<span class="sd">        Array of coordinates of reference locations in</span>
<span class="sd">        (m, n-dimensional) order, such as {n_locations,</span>
<span class="sd">        x_coordinates, y_coordinates, ...} for as many dimensions as</span>
<span class="sd">        required. For example to calculate distances to a single x,y,z</span>
<span class="sd">        location:</span>

<span class="sd">        refs = [-57.345, -110.134, 1012]</span>

<span class="sd">        And to calculate distances to three x,y reference locations:</span>

<span class="sd">        refs = [</span>
<span class="sd">            [-57.345, -110.134],</span>
<span class="sd">            [-56.345, -109.123],</span>
<span class="sd">            [-58.534, -112.123]</span>
<span class="sd">        ]</span>

<span class="sd">        The supplied array has to have at least x,y coordinates with a</span>
<span class="sd">        (1, 2) shape for a single location.</span>

<span class="sd">    minimum : bool, default is False</span>
<span class="sd">        Optionally calculate the minimum distance to the combined</span>
<span class="sd">        reference locations, resulting in a single new feature,</span>
<span class="sd">        rather than a new feature for each individual reference</span>
<span class="sd">        location.</span>

<span class="sd">    log : bool (opt), default=False</span>
<span class="sd">        Optionally log-transform the distance measures.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    X_new : ndarray</span>
<span class="sd">        Array of shape (n_samples, n_features) with new geodistance</span>
<span class="sd">        features appended to the right-most columns of the array.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">refs</span><span class="p">,</span> <span class="n">minimum</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">log</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refs</span> <span class="o">=</span> <span class="n">refs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span> <span class="o">=</span> <span class="n">log</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refs_</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">minimum</span> <span class="o">=</span> <span class="n">minimum</span>

    <span class="k">def</span> <span class="nf">fit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refs_</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">refs</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">refs_</span><span class="o">.</span><span class="n">ndim</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;`refs` has to be a m,n-dimensional array with  at least two dimensions&quot;</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">minimum</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="n">dists</span> <span class="o">=</span> <span class="n">cdist</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">refs_</span><span class="p">,</span> <span class="n">X</span><span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">minimum</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">tree</span> <span class="o">=</span> <span class="n">cKDTree</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">refs_</span><span class="p">)</span>
            <span class="n">dists</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">log</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">dists</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">dists</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">column_stack</span><span class="p">((</span><span class="n">X</span><span class="p">,</span> <span class="n">dists</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="pyspatialml.transformers.KNNTransformer" class="doc doc-heading">
        <code>KNNTransformer</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><span title="sklearn.base.BaseEstimator">BaseEstimator</span></code>, <code><span title="sklearn.base.TransformerMixin">TransformerMixin</span></code></p>

  
      <p>Transformer to generate new lag features by weighted aggregation
of K-neighboring observations.</p>
<p>A lag transformer uses a weighted mean/mode of the values of the
K-neighboring observations to generate new lagged features. The
weighted mean/mode of the surrounding observations are appended
as a new feature to the right-most column in the training data.</p>
<p>The K-neighboring observations are determined using the distance
metric specified in the <code>metric</code> argument. The default metric is
minkowski, and with p=2 is equivalent to the standard Euclidean
metric.</p>
<h4 id="pyspatialml.transformers.KNNTransformer--parameters">Parameters</h4>

<details class="n_neighbors-">
  <summary>int, default = 7</summary>
  <p>Number of neighbors to use by default for kneighbors queries.</p>
</details>
<details class="weights-">
  <summary>{‘uniform’, ‘distance’} or callable, default=’distance’</summary>
  <p>Weight function used in prediction. Possible values:</p>
<pre><code>- ‘uniform’ : uniform weights. All points in each
  neighborhood are weighted equally.
- ‘distance’ : weight points by the inverse of their
   distance. In this case, closer neighbors of a query
   point will have a greater influence than neighbors
   which are further away.
- [callable] : a user-defined function which accepts an
  array of distances, and returns an array of the same
  shape containing the weights.
</code></pre>
</details>
<details class="measure-">
  <summary>{'mean', 'mode'}</summary>
  <p>Function that is used to apply the weights to <code>y</code>. Use 'mean'
if the target variable is continuous and 'mode' if the target
variable is discrete.</p>
</details>
<details class="radius-">
  <summary>float, default=1.0</summary>
  <p>Range of parameter space to use by default for radius_neighbors
queries.</p>
</details>
<details class="algorithm">
  <summary>{‘auto’, ‘ball_tree’, ‘kd_tree’, ‘brute’}, default=’auto’</summary>
  <p>Algorithm used to compute the nearest neighbors:</p>
<pre><code>- ‘ball_tree’ will use BallTree
- ‘kd_tree’ will use KDTree
- ‘brute’ will use a brute-force search.
- ‘auto’ will attempt to decide the most appropriate
   algorithm based on the values passed to fit method.
- Note: fitting on sparse input will override the setting
  of this parameter, using brute force.
</code></pre>
</details>
<details class="leaf_size-">
  <summary>int, default=30</summary>
  <p>Leaf size passed to BallTree or KDTree. This can affect the
speed of the construction and query, as well as the memory
required to store the tree. The optimal value depends on the
nature of the problem.</p>
</details>
<details class="metric-">
  <summary>str or callable, default=’minkowski’</summary>
  <p>The distance metric to use for the tree. The default metric is
minkowski, and with p=2 is equivalent to the standard
Euclidean metric. See the documentation of DistanceMetric for
a list of available metrics. If metric is “precomputed”, X is
assumed to be a distance matrix and must be square during fit.
X may be a sparse graph, in which case only “nonzero” elements
may be considered neighbors.</p>
</details>
<details class="p-">
  <summary>int, default=2</summary>
  <p>Parameter for the Minkowski metric from
sklearn.metrics.pairwise.pairwise_distances. When p = 1, this
is equivalent to using manhattan_distance (l1), and
euclidean_distance (l2) for p = 2. For arbitrary p,
minkowski_distance (l_p) is used.</p>
</details>
<details class="normalize-">
  <summary>bool, default=True</summary>
  <p>Whether to normalize the inputs using
sklearn.preprocessing.Normalizer</p>
</details>
<details class="metric_params-">
  <summary>dict, default=None</summary>
  <p>Additional keyword arguments for the metric function.</p>
</details>
<details class="kernel_params-">
  <summary>dict, default=None</summary>
  <p>Additional keyword arguments to pass to a custom kernel
function.</p>
</details>
<details class="n_jobs-">
  <summary>int, default=None</summary>
  <p>The number of parallel jobs to run for neighbors search. None
means 1 unless in a joblib.parallel_backend context. -1 means
using all processors. See Glossary for more details.</p>
</details>

        <details class="quote">
          <summary>Source code in <code>pyspatialml/transformers.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">KNNTransformer</span><span class="p">(</span><span class="n">BaseEstimator</span><span class="p">,</span> <span class="n">TransformerMixin</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Transformer to generate new lag features by weighted aggregation</span>
<span class="sd">    of K-neighboring observations.</span>

<span class="sd">    A lag transformer uses a weighted mean/mode of the values of the</span>
<span class="sd">    K-neighboring observations to generate new lagged features. The</span>
<span class="sd">    weighted mean/mode of the surrounding observations are appended</span>
<span class="sd">    as a new feature to the right-most column in the training data.</span>

<span class="sd">    The K-neighboring observations are determined using the distance</span>
<span class="sd">    metric specified in the `metric` argument. The default metric is</span>
<span class="sd">    minkowski, and with p=2 is equivalent to the standard Euclidean</span>
<span class="sd">    metric.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    n_neighbors : int, default = 7</span>
<span class="sd">        Number of neighbors to use by default for kneighbors queries.</span>

<span class="sd">    weights : {‘uniform’, ‘distance’} or callable, default=’distance’</span>
<span class="sd">        Weight function used in prediction. Possible values:</span>

<span class="sd">            - ‘uniform’ : uniform weights. All points in each</span>
<span class="sd">              neighborhood are weighted equally.</span>
<span class="sd">            - ‘distance’ : weight points by the inverse of their</span>
<span class="sd">               distance. In this case, closer neighbors of a query</span>
<span class="sd">               point will have a greater influence than neighbors</span>
<span class="sd">               which are further away.</span>
<span class="sd">            - [callable] : a user-defined function which accepts an</span>
<span class="sd">              array of distances, and returns an array of the same</span>
<span class="sd">              shape containing the weights.</span>

<span class="sd">    measure : {&#39;mean&#39;, &#39;mode&#39;}</span>
<span class="sd">        Function that is used to apply the weights to `y`. Use &#39;mean&#39;</span>
<span class="sd">        if the target variable is continuous and &#39;mode&#39; if the target</span>
<span class="sd">        variable is discrete.</span>

<span class="sd">    radius : float, default=1.0</span>
<span class="sd">        Range of parameter space to use by default for radius_neighbors</span>
<span class="sd">        queries.</span>

<span class="sd">    algorithm: {‘auto’, ‘ball_tree’, ‘kd_tree’, ‘brute’}, default=’auto’</span>
<span class="sd">        Algorithm used to compute the nearest neighbors:</span>

<span class="sd">            - ‘ball_tree’ will use BallTree</span>
<span class="sd">            - ‘kd_tree’ will use KDTree</span>
<span class="sd">            - ‘brute’ will use a brute-force search.</span>
<span class="sd">            - ‘auto’ will attempt to decide the most appropriate</span>
<span class="sd">               algorithm based on the values passed to fit method.</span>
<span class="sd">            - Note: fitting on sparse input will override the setting</span>
<span class="sd">              of this parameter, using brute force.</span>

<span class="sd">    leaf_size : int, default=30</span>
<span class="sd">        Leaf size passed to BallTree or KDTree. This can affect the</span>
<span class="sd">        speed of the construction and query, as well as the memory</span>
<span class="sd">        required to store the tree. The optimal value depends on the</span>
<span class="sd">        nature of the problem.</span>

<span class="sd">    metric : str or callable, default=’minkowski’</span>
<span class="sd">        The distance metric to use for the tree. The default metric is</span>
<span class="sd">        minkowski, and with p=2 is equivalent to the standard</span>
<span class="sd">        Euclidean metric. See the documentation of DistanceMetric for</span>
<span class="sd">        a list of available metrics. If metric is “precomputed”, X is</span>
<span class="sd">        assumed to be a distance matrix and must be square during fit.</span>
<span class="sd">        X may be a sparse graph, in which case only “nonzero” elements</span>
<span class="sd">        may be considered neighbors.</span>

<span class="sd">    p : int, default=2</span>
<span class="sd">        Parameter for the Minkowski metric from</span>
<span class="sd">        sklearn.metrics.pairwise.pairwise_distances. When p = 1, this</span>
<span class="sd">        is equivalent to using manhattan_distance (l1), and</span>
<span class="sd">        euclidean_distance (l2) for p = 2. For arbitrary p,</span>
<span class="sd">        minkowski_distance (l_p) is used.</span>

<span class="sd">    normalize : bool, default=True</span>
<span class="sd">        Whether to normalize the inputs using</span>
<span class="sd">        sklearn.preprocessing.Normalizer</span>

<span class="sd">    metric_params : dict, default=None</span>
<span class="sd">        Additional keyword arguments for the metric function.</span>

<span class="sd">    kernel_params : dict, default=None</span>
<span class="sd">        Additional keyword arguments to pass to a custom kernel</span>
<span class="sd">        function.</span>

<span class="sd">    n_jobs : int, default=None</span>
<span class="sd">        The number of parallel jobs to run for neighbors search. None</span>
<span class="sd">        means 1 unless in a joblib.parallel_backend context. -1 means</span>
<span class="sd">        using all processors. See Glossary for more details.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">n_neighbors</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span>
        <span class="n">weights</span><span class="o">=</span><span class="s2">&quot;distance&quot;</span><span class="p">,</span>
        <span class="n">measure</span><span class="o">=</span><span class="s2">&quot;mean&quot;</span><span class="p">,</span>
        <span class="n">radius</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
        <span class="n">algorithm</span><span class="o">=</span><span class="s2">&quot;auto&quot;</span><span class="p">,</span>
        <span class="n">leaf_size</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
        <span class="n">metric</span><span class="o">=</span><span class="s2">&quot;minkowski&quot;</span><span class="p">,</span>
        <span class="n">p</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
        <span class="n">normalize</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">metric_params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">kernel_params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">n_jobs</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">n_neighbors</span> <span class="o">=</span> <span class="n">n_neighbors</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">weights</span> <span class="o">=</span> <span class="n">weights</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">measure</span> <span class="o">=</span> <span class="n">measure</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="o">=</span> <span class="n">radius</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">algorithm</span> <span class="o">=</span> <span class="n">algorithm</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">leaf_size</span> <span class="o">=</span> <span class="n">leaf_size</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metric</span> <span class="o">=</span> <span class="n">metric</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">p</span> <span class="o">=</span> <span class="n">p</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metric_params</span> <span class="o">=</span> <span class="n">metric_params</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kernel_params</span> <span class="o">=</span> <span class="n">kernel_params</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">normalize</span> <span class="o">=</span> <span class="n">normalize</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n_jobs</span> <span class="o">=</span> <span class="n">n_jobs</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">knn</span> <span class="o">=</span> <span class="n">NearestNeighbors</span><span class="p">(</span>
            <span class="n">n_neighbors</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">n_neighbors</span><span class="p">,</span>
            <span class="n">radius</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="p">,</span>
            <span class="n">algorithm</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">algorithm</span><span class="p">,</span>
            <span class="n">leaf_size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">leaf_size</span><span class="p">,</span>
            <span class="n">metric</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">metric</span><span class="p">,</span>
            <span class="n">p</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="p">,</span>
            <span class="n">metric_params</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">metric_params</span><span class="p">,</span>
            <span class="n">n_jobs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">n_jobs</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">y_</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">fit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Fit the base_estimator with features from X</span>
<span class="sd">        {n_samples, n_features} and with an additional spatially lagged</span>
<span class="sd">        variable added to the right-most column of the training data.</span>

<span class="sd">        During fitting, the k-neighbors to each training point are</span>
<span class="sd">        used to estimate the spatial lag component. The training point</span>
<span class="sd">        is not included in the calculation, i.e. the training point is</span>
<span class="sd">        not considered its own neighbor.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        X : array-like of sample {n_samples, n_features} using for model</span>
<span class="sd">            fitting The training input samples</span>

<span class="sd">        y : array-like of shape (n_samples,)</span>
<span class="sd">            The target values (class labels in classification, real</span>
<span class="sd">            numbers in regression).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># some checks</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">kernel_params</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">kernel_params</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">if</span> <span class="n">y</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">n_outputs_</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">n_outputs_</span> <span class="o">=</span> <span class="n">y</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="c1"># fit knn and get values of neighbors</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">normalize</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">scaler</span> <span class="o">=</span> <span class="n">Normalizer</span><span class="p">()</span>
            <span class="n">X</span> <span class="o">=</span> <span class="n">scaler</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">scaler_</span> <span class="o">=</span> <span class="n">scaler</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">knn</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y_</span> <span class="o">=</span> <span class="n">y</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Transform method for spatial lag models.</span>

<span class="sd">        Augments new observations with a spatial lag variable created</span>
<span class="sd">        from a weighted mean/mode (regression/classification) of</span>
<span class="sd">        k-neighboring observations.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        X : array-like of sample {n_samples, n_features}</span>
<span class="sd">            New samples for the prediction.</span>

<span class="sd">        y : None</span>
<span class="sd">            Not used.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># get distances from training points to new data</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">normalize</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">X</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scaler_</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>

        <span class="n">neighbor_dist</span><span class="p">,</span> <span class="n">neighbor_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">knn</span><span class="o">.</span><span class="n">kneighbors</span><span class="p">(</span><span class="n">X</span><span class="o">=</span><span class="n">X</span><span class="p">)</span>

        <span class="c1"># mask zero distances</span>
        <span class="n">neighbor_dist</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ma</span><span class="o">.</span><span class="n">masked_equal</span><span class="p">(</span><span class="n">neighbor_dist</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="c1"># get values of closest training points to new data</span>
        <span class="n">neighbor_vals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">y_</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">neighbor_ids</span><span class="p">])</span>

        <span class="c1"># mask neighbor values with zero distances</span>
        <span class="n">mask</span> <span class="o">=</span> <span class="n">neighbor_dist</span><span class="o">.</span><span class="n">mask</span>

        <span class="k">if</span> <span class="n">mask</span><span class="o">.</span><span class="n">all</span><span class="p">()</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
            <span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">neighbor_dist</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">bool</span><span class="p">)</span>
            <span class="n">mask</span><span class="p">[:]</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="n">neighbor_vals</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">neighbor_vals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ma</span><span class="o">.</span><span class="n">masked_array</span><span class="p">(</span><span class="n">neighbor_vals</span><span class="p">,</span> <span class="n">mask</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">n_outputs</span> <span class="o">=</span> <span class="n">neighbor_vals</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">mask</span><span class="p">[:,</span> <span class="p">:,</span> <span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">],</span> <span class="n">n_outputs</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
            <span class="n">neighbor_vals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ma</span><span class="o">.</span><span class="n">masked_array</span><span class="p">(</span><span class="n">neighbor_vals</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">)</span>

        <span class="c1"># calculated weighted means</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">weights</span> <span class="o">==</span> <span class="s2">&quot;distance&quot;</span><span class="p">:</span>
            <span class="n">new_X</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_distance_weighting</span><span class="p">(</span><span class="n">neighbor_vals</span><span class="p">,</span> <span class="n">neighbor_dist</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">weights</span> <span class="o">==</span> <span class="s2">&quot;uniform&quot;</span><span class="p">:</span>
            <span class="n">new_X</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_uniform_weighting</span><span class="p">(</span><span class="n">neighbor_vals</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">callable</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">weights</span><span class="p">):</span>
            <span class="n">new_X</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_custom_weighting</span><span class="p">(</span><span class="n">neighbor_vals</span><span class="p">,</span> <span class="n">neighbor_dist</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">column_stack</span><span class="p">((</span><span class="n">X</span><span class="p">,</span> <span class="n">new_X</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_apply_weights</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">neighbor_vals</span><span class="p">,</span> <span class="n">neighbor_weights</span><span class="p">):</span>
        <span class="c1"># weighted mean/mode of neighbors for a single regression target</span>
        <span class="k">if</span> <span class="n">neighbor_vals</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">measure</span> <span class="o">==</span> <span class="s2">&quot;mean&quot;</span><span class="p">:</span>
                <span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ma</span><span class="o">.</span><span class="n">average</span><span class="p">(</span><span class="n">neighbor_vals</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="n">neighbor_weights</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">X</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">weighted_mode</span><span class="p">(</span><span class="n">neighbor_vals</span><span class="p">,</span> <span class="n">neighbor_weights</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># weighted mean of neighbors for a multi-target regression</span>
        <span class="c1"># neighbor_vals = (n_samples, n_neighbors, n_targets)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">neighbor_vals</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">neighbor_vals</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">measure</span> <span class="o">==</span> <span class="s2">&quot;mean&quot;</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">neighbor_vals</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]):</span>
                    <span class="n">X</span><span class="p">[:,</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ma</span><span class="o">.</span><span class="n">average</span><span class="p">(</span>
                        <span class="n">neighbor_vals</span><span class="p">[:,</span> <span class="p">:,</span> <span class="n">i</span><span class="p">],</span> <span class="n">weights</span><span class="o">=</span><span class="n">neighbor_weights</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span>
                    <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">neighbor_vals</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]):</span>
                    <span class="n">X</span><span class="p">[:,</span> <span class="n">i</span><span class="p">],</span> <span class="n">_</span> <span class="o">=</span> <span class="n">weighted_mode</span><span class="p">(</span>
                        <span class="n">neighbor_vals</span><span class="p">[:,</span> <span class="p">:,</span> <span class="n">i</span><span class="p">],</span> <span class="n">neighbor_weights</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span>
                    <span class="p">)</span>

        <span class="k">return</span> <span class="n">X</span>

    <span class="k">def</span> <span class="nf">_distance_weighting</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">neighbor_vals</span><span class="p">,</span> <span class="n">neighbor_dist</span><span class="p">):</span>
        <span class="n">weights</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">neighbor_dist</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_apply_weights</span><span class="p">(</span><span class="n">neighbor_vals</span><span class="p">,</span> <span class="n">weights</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_uniform_weighting</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">neighbor_vals</span><span class="p">):</span>
        <span class="n">weights</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="n">neighbor_vals</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">neighbor_vals</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_apply_weights</span><span class="p">(</span><span class="n">neighbor_vals</span><span class="p">,</span> <span class="n">weights</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_custom_weighting</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">neighbor_vals</span><span class="p">,</span> <span class="n">neighbor_dist</span><span class="p">):</span>
        <span class="n">weights</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">weights</span><span class="p">(</span><span class="n">neighbor_dist</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">kernel_params</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_apply_weights</span><span class="p">(</span><span class="n">neighbor_vals</span><span class="p">,</span> <span class="n">weights</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_distance_weighting</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">neighbor_vals</span><span class="p">,</span> <span class="n">neighbor_dist</span><span class="p">):</span>
        <span class="n">weights</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">neighbor_dist</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_apply_weights</span><span class="p">(</span><span class="n">neighbor_vals</span><span class="p">,</span> <span class="n">weights</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_uniform_weighting</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">neighbor_vals</span><span class="p">):</span>
        <span class="n">weights</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="n">neighbor_vals</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">neighbor_vals</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_apply_weights</span><span class="p">(</span><span class="n">neighbor_vals</span><span class="p">,</span> <span class="n">weights</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_custom_weighting</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">neighbor_vals</span><span class="p">,</span> <span class="n">neighbor_dist</span><span class="p">):</span>
        <span class="n">weights</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">weights</span><span class="p">(</span><span class="n">neighbor_dist</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">kernel_params</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_apply_weights</span><span class="p">(</span><span class="n">neighbor_vals</span><span class="p">,</span> <span class="n">weights</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="pyspatialml.transformers.KNNTransformer.fit" class="doc doc-heading">
<code class="highlight language-python"><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Fit the base_estimator with features from X
{n_samples, n_features} and with an additional spatially lagged
variable added to the right-most column of the training data.</p>
<p>During fitting, the k-neighbors to each training point are
used to estimate the spatial lag component. The training point
is not included in the calculation, i.e. the training point is
not considered its own neighbor.</p>
<h5 id="pyspatialml.transformers.KNNTransformer.fit--parameters">Parameters</h5>

<details class="x-">
  <summary>array-like of sample {n_samples, n_features} using for model</summary>
  <p>fitting The training input samples</p>
</details>
<details class="y-">
  <summary>array-like of shape (n_samples,)</summary>
  <p>The target values (class labels in classification, real
numbers in regression).</p>
</details>
      <details class="quote">
        <summary>Source code in <code>pyspatialml/transformers.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">fit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Fit the base_estimator with features from X</span>
<span class="sd">    {n_samples, n_features} and with an additional spatially lagged</span>
<span class="sd">    variable added to the right-most column of the training data.</span>

<span class="sd">    During fitting, the k-neighbors to each training point are</span>
<span class="sd">    used to estimate the spatial lag component. The training point</span>
<span class="sd">    is not included in the calculation, i.e. the training point is</span>
<span class="sd">    not considered its own neighbor.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    X : array-like of sample {n_samples, n_features} using for model</span>
<span class="sd">        fitting The training input samples</span>

<span class="sd">    y : array-like of shape (n_samples,)</span>
<span class="sd">        The target values (class labels in classification, real</span>
<span class="sd">        numbers in regression).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># some checks</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">kernel_params</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kernel_params</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">if</span> <span class="n">y</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n_outputs_</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n_outputs_</span> <span class="o">=</span> <span class="n">y</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

    <span class="c1"># fit knn and get values of neighbors</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">normalize</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">scaler</span> <span class="o">=</span> <span class="n">Normalizer</span><span class="p">()</span>
        <span class="n">X</span> <span class="o">=</span> <span class="n">scaler</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scaler_</span> <span class="o">=</span> <span class="n">scaler</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">knn</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">y_</span> <span class="o">=</span> <span class="n">y</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pyspatialml.transformers.KNNTransformer.transform" class="doc doc-heading">
<code class="highlight language-python"><span class="n">transform</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Transform method for spatial lag models.</p>
<p>Augments new observations with a spatial lag variable created
from a weighted mean/mode (regression/classification) of
k-neighboring observations.</p>
<h5 id="pyspatialml.transformers.KNNTransformer.transform--parameters">Parameters</h5>

<details class="x-">
  <summary>array-like of sample {n_samples, n_features}</summary>
  <p>New samples for the prediction.</p>
</details>
<details class="y-">
  <summary>None</summary>
  <p>Not used.</p>
</details>
      <details class="quote">
        <summary>Source code in <code>pyspatialml/transformers.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Transform method for spatial lag models.</span>

<span class="sd">    Augments new observations with a spatial lag variable created</span>
<span class="sd">    from a weighted mean/mode (regression/classification) of</span>
<span class="sd">    k-neighboring observations.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    X : array-like of sample {n_samples, n_features}</span>
<span class="sd">        New samples for the prediction.</span>

<span class="sd">    y : None</span>
<span class="sd">        Not used.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># get distances from training points to new data</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">normalize</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">X</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scaler_</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>

    <span class="n">neighbor_dist</span><span class="p">,</span> <span class="n">neighbor_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">knn</span><span class="o">.</span><span class="n">kneighbors</span><span class="p">(</span><span class="n">X</span><span class="o">=</span><span class="n">X</span><span class="p">)</span>

    <span class="c1"># mask zero distances</span>
    <span class="n">neighbor_dist</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ma</span><span class="o">.</span><span class="n">masked_equal</span><span class="p">(</span><span class="n">neighbor_dist</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

    <span class="c1"># get values of closest training points to new data</span>
    <span class="n">neighbor_vals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">y_</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">neighbor_ids</span><span class="p">])</span>

    <span class="c1"># mask neighbor values with zero distances</span>
    <span class="n">mask</span> <span class="o">=</span> <span class="n">neighbor_dist</span><span class="o">.</span><span class="n">mask</span>

    <span class="k">if</span> <span class="n">mask</span><span class="o">.</span><span class="n">all</span><span class="p">()</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
        <span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">neighbor_dist</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">bool</span><span class="p">)</span>
        <span class="n">mask</span><span class="p">[:]</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">if</span> <span class="n">neighbor_vals</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
        <span class="n">neighbor_vals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ma</span><span class="o">.</span><span class="n">masked_array</span><span class="p">(</span><span class="n">neighbor_vals</span><span class="p">,</span> <span class="n">mask</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">n_outputs</span> <span class="o">=</span> <span class="n">neighbor_vals</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">mask</span><span class="p">[:,</span> <span class="p">:,</span> <span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">],</span> <span class="n">n_outputs</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">neighbor_vals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ma</span><span class="o">.</span><span class="n">masked_array</span><span class="p">(</span><span class="n">neighbor_vals</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">)</span>

    <span class="c1"># calculated weighted means</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">weights</span> <span class="o">==</span> <span class="s2">&quot;distance&quot;</span><span class="p">:</span>
        <span class="n">new_X</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_distance_weighting</span><span class="p">(</span><span class="n">neighbor_vals</span><span class="p">,</span> <span class="n">neighbor_dist</span><span class="p">)</span>

    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">weights</span> <span class="o">==</span> <span class="s2">&quot;uniform&quot;</span><span class="p">:</span>
        <span class="n">new_X</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_uniform_weighting</span><span class="p">(</span><span class="n">neighbor_vals</span><span class="p">)</span>

    <span class="k">elif</span> <span class="n">callable</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">weights</span><span class="p">):</span>
        <span class="n">new_X</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_custom_weighting</span><span class="p">(</span><span class="n">neighbor_vals</span><span class="p">,</span> <span class="n">neighbor_dist</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">column_stack</span><span class="p">((</span><span class="n">X</span><span class="p">,</span> <span class="n">new_X</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>




  </div>

  </div>

</div>

<div class="doc doc-object doc-module">


<a id="pyspatialml.vector"></a>
  <div class="doc doc-contents first">

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h2 id="pyspatialml.vector.filter_points" class="doc doc-heading">
<code class="highlight language-python"><span class="n">filter_points</span><span class="p">(</span><span class="n">gdf</span><span class="p">,</span> <span class="n">min_dist</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">remove</span><span class="o">=</span><span class="s1">&#39;first&#39;</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Filter points in geodataframe using a minimum distance buffer.</p>
<h4 id="pyspatialml.vector.filter_points--args">Args</h4>

<details class="gdf-">
  <summary>Geopandas GeoDataFrame</summary>
  <p>Containing point geometries.</p>
</details>
<details class="min_dist-">
  <summary>int or float, optional (default=0)</summary>
  <p>Minimum distance by which to filter out closely spaced points.</p>
</details>
<details class="remove-">
  <summary>str, optional (default='first')</summary>
  <p>Optionally choose to remove 'first' occurrences or 'last'
occurrences.</p>
</details>      <h4 id="pyspatialml.vector.filter_points--returns">Returns</h4>

<details class="xy-">
  <summary>2d array-like</summary>
  <p>Numpy array filtered coordinates</p>
</details>
      <details class="quote">
        <summary>Source code in <code>pyspatialml/vector.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">filter_points</span><span class="p">(</span><span class="n">gdf</span><span class="p">,</span> <span class="n">min_dist</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">remove</span><span class="o">=</span><span class="s2">&quot;first&quot;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Filter points in geodataframe using a minimum distance buffer.</span>

<span class="sd">    Args</span>
<span class="sd">    ----</span>
<span class="sd">    gdf : Geopandas GeoDataFrame</span>
<span class="sd">        Containing point geometries.</span>

<span class="sd">    min_dist : int or float, optional (default=0)</span>
<span class="sd">        Minimum distance by which to filter out closely spaced points.</span>

<span class="sd">    remove : str, optional (default=&#39;first&#39;)</span>
<span class="sd">        Optionally choose to remove &#39;first&#39; occurrences or &#39;last&#39;</span>
<span class="sd">        occurrences.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    xy : 2d array-like</span>
<span class="sd">        Numpy array filtered coordinates</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">xy</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>

    <span class="n">Z</span> <span class="o">=</span> <span class="n">linkage</span><span class="p">(</span><span class="n">xy</span><span class="p">,</span> <span class="s2">&quot;complete&quot;</span><span class="p">)</span>
    <span class="n">tree_thres</span> <span class="o">=</span> <span class="n">cut_tree</span><span class="p">(</span><span class="n">Z</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">min_dist</span><span class="p">)</span>
    <span class="n">gdf</span><span class="p">[</span><span class="s2">&quot;tree_thres&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tree_thres</span>

    <span class="k">if</span> <span class="n">remove</span> <span class="o">==</span> <span class="s2">&quot;first&quot;</span><span class="p">:</span>
        <span class="n">gdf</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">&quot;tree_thres&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>

    <span class="k">elif</span> <span class="n">remove</span> <span class="o">==</span> <span class="s2">&quot;last&quot;</span><span class="p">:</span>
        <span class="n">gdf</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">&quot;tree_thres&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">last</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">gdf</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="pyspatialml.vector.get_random_point_in_polygon" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_random_point_in_polygon</span><span class="p">(</span><span class="n">poly</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Generates random shapely Point geometry objects within a single
shapely Polygon object.</p>
<h4 id="pyspatialml.vector.get_random_point_in_polygon--args">Args</h4>
<p>poly : Shapely Polygon object</p>
<h4 id="pyspatialml.vector.get_random_point_in_polygon--returns">Returns</h4>
<p>p : Shapely Point object</p>

      <details class="quote">
        <summary>Source code in <code>pyspatialml/vector.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_random_point_in_polygon</span><span class="p">(</span><span class="n">poly</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Generates random shapely Point geometry objects within a single</span>
<span class="sd">    shapely Polygon object.</span>

<span class="sd">    Args</span>
<span class="sd">    ----</span>
<span class="sd">    poly : Shapely Polygon object</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    p : Shapely Point object</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="p">(</span><span class="n">minx</span><span class="p">,</span> <span class="n">miny</span><span class="p">,</span> <span class="n">maxx</span><span class="p">,</span> <span class="n">maxy</span><span class="p">)</span> <span class="o">=</span> <span class="n">poly</span><span class="o">.</span><span class="n">bounds</span>

    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">minx</span><span class="p">,</span> <span class="n">maxx</span><span class="p">),</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">miny</span><span class="p">,</span> <span class="n">maxy</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">poly</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">p</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

              
            </article>
            
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../mlworkflow/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Example workflow" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Example workflow
            </div>
          </div>
        </a>
      
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "toc.integrate"], "search": "../assets/javascripts/workers/search.b97dbffb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.6c7ad80a.min.js"></script>
      
    
  </body>
</html>